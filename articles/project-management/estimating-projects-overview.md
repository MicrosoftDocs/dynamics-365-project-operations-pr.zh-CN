---
title: 财务估算概念
description: 此主题提供有关 Project Operations 中的项目财务估算的信息。
author: rumant
ms.date: 03/22/2021
ms.topic: article
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: 488b61ee1e81aac47fa92fff141f17b023e4f1c0
ms.sourcegitcommit: 40f68387f594180af64a5e5c748b6efa188bd300
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/10/2021
ms.locfileid: "6002585"
---
# <a name="financial-estimation-concepts"></a>财务估算概念

_**适用于：** 基于资源/非库存场景的 Project Operations，精简部署 - 估价开票交易_

在 Dynamics 365 Project Operations 中，您可以分两个阶段进行项目财务估算： 
1. 在赢得交易之前的预售阶段。 
2. 在创建项目合同后的执行阶段。 

您可以使用以下 3 页中的任一页为基于项目的工作创建财务估算：
- **报价单明细** 页，使用报价单明细详细信息。  
- **项目合同子项** 页，使用合同子项详细信息。 
- **项目** 页，使用 **任务** 或 **费用估算** 选项卡页。

## <a name="use-a-project-quote-to-create-an-estimate"></a>使用项目报价单创建估算
在基于项目的报价单中，可使用 **报价单明细详细信息** 实体估算交付项目所需工作。 然后可以与客户共享该估算。

基于项目的报价单明细可以包含零到多个报价单明细详细信息。 报价单明细详细信息用于估算时间、支出或费用。 Microsoft Dynamics 365 Project Operations 不允许报价单明细详细信息中包含材料估算。 这些估算称为交易分类。 也可以在交易分类中输入估算税额。

除了交易分类，报价单明细详细信息中还有交易类型。 报价单明细详细信息支持两种交易记录类型：**成本** 和 **项目合同**。

## <a name="use-a-project-contract-to-create-an-estimate"></a>使用项目合同创建估算

如果在创建基于项目的合同时使用了报价单，将把为报价单中每项报价单明细进行的估算复制到项目合同中。 项目合同的结构类似项目报价单的结构，具有明细、明细详细信息和发票计划。

可直接在项目合同中进行估算，就像在项目报价单中进行一样。 对于项目报价，则使用合同子项和合同子项详细信息进行估算。 也可以使用自下而上的估算方法从创建的项目计划生成合同子项详细信息。

合同子项详细信息可用于估算时间、支出或费用。 也可以在合同子项详细信息中输入估算税额。

合同子项详细信息中不允许有材料估算。

## <a name="use-a-project-to-create-an-estimate"></a>使用项目创建估算 

可估算项目的时间和支出。 Project Operations 不支持估算项目材料或费用。

创建任务并确定执行任务所需通用资源的属性时，将生成时间估算。 时间估算从计划任务生成。 如果在计划上下文外部创建通用团队成员，则不创建时间估算。

将在 **支出估算** 页的网格中输入支出估算。

为项目创建估算被认为是最佳做法，因为您可以针对项目计划中每个任务的人工或时间和支出建立自下而上的详细估算。 然后，您可以使用此详细估算为每个报价单明细创建估算，并为客户生成更可靠的报价单。 当您使用项目计划在报价单明细上导入或创建详细估算时，Project Operations 会导入这些估算的销售值和成本值。 导入后，您可以查看项目报价单上查看获利能力、利润率和可行性指标。

## <a name="understanding-estimates"></a>了解估算

请以下表为指导了解估算阶段的业务逻辑。

| 方案                                                                                                                                                                                                                                                                                                                                          | 实体记录                                                                                                                                                                                                       | 交易类型 | 交易分类 | 其他信息                                                            |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------|-------------|-----------------------------------------------------------------------------------|
| 当需要估算报价单中的时间的销售值时                                                                                                                                                                                                                                                                                    | 创建报价单明细详细信息 (QLD) 记录                                                                                                                                                                               | 项目合同 | Time        | 销售端 QLD 行中的交易来源字段引用成本端 QLD |
|                                                                                                                                                                                                                                                                                     | 系统将再创建一条 QLD 记录来存储相应的成本值。 系统将把所有非货币字段从销售 QLD 复制到成本 QLD。                                                                                                                                                                               | 成本 | Time        | 销售端报价单明细详细信息 (QLD) 行中的交易来源字段引用成本端 QLD |
| 当需要估算合同中的时间的销售值时                                                                                                                                                                                                                                                                                 | 创建项目合同子项详细信息 (CLD) 记录                                                                                                                                                                    | 项目合同 | Time        | 销售端 CLD 行中的交易来源字段引用成本 CLD      |
|                                                                                                                                                                                                                                                                                  | 系统将再创建一条 CLD 记录来存储相应的成本值。 系统将把所有非货币字段从销售 CLD 复制到成本 CLD。                                                                                                                                                                    | 成本 | Time        | 销售端 CLD 行中的交易来源字段引用成本 CLD      |
| 当用户描述项目任务的资源时                                                                                                                                                                                                                                                                                            | 使用所有必需定价维度创建任务时，将创建用于显示任务的销售值的估算明细记录。 角色和部门是定价维度 | 项目合同 | 时间        |                                                                                   |
|     | 使用所有必需定价维度创建任务时，将创建用于显示任务的成本值的估算明细记录。 系统将把所有非货币字段从销售估算明细复制到成本估算明细。 角色和部门是成本和帐单费率的定价维度。                                                                                                                                                                                                                | 成本             | 时间           |                                                                                   |



## <a name="customize-the-quote-line-detail-and-contract-line-detail-entities"></a>自定义报价单明细详细信息和合同子项详细信息实体

如果在报价单明细详细信息中添加了自定义字段，并且希望系统输入字段的值作为创建的相关成本明细中的默认值，请使用 **PreOperationContractLineDetailUpdate** 和 **PreOperationQuoteLineDetailUpdate** 插件注册工具。 更改报价单明细详细信息或合同子项之后，必须重新注册这些插件。 执行以下步骤完成流程。

1. 打开 PluginRegistrationTool，然后连接到您的在线实例。
2. 选择 **搜索**，然后搜索要更新的插件。
3. 选择插件，然后在主页中单击 **选择**。
4. 选择要更新的插件的步骤，然后选择 **更新**。
5. 在 **更新现有步骤** 对话框的 **筛选属性** 字段中，选择省略号按钮 (**...**)：
6. 在 **选择属性** 对话框中，选中自定义属性的复选框。
7. 选择 **确定** 关闭对话框，然后选择 **更新步骤**。
8. 对第二个插件重复步骤 1 到 7。
9. 关闭 **PluginRegistrationTool**。


[!INCLUDE[footer-include](../includes/footer-banner.md)]
