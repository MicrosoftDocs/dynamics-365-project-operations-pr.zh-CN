---
title: 管理估价账单
description: 此主题提供有关如何管理和使用估价发票的信息。
author: rumant
manager: Annbe
ms.date: 10/27/2020
ms.topic: article
ms.service: project-operations
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: 29e301062f8f3ba955a95953bc2e891f3acaf765
ms.sourcegitcommit: fa32b1893286f20271fa4ec4be8fc68bd135f53c
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/15/2021
ms.locfileid: "5287677"
---
# <a name="manage-a-proforma-invoice"></a>管理估价账单

_**适用于：** 面向资源/非库存场景的 Project Operations_

在 Dynamics 365 Project Operations 中，估价发票被构建为 Dynamics 365 Sales 中发票的扩展。 但是，在开票方面，Sales 和 Project Operations 之间的开票流程存在很多差异。 例如，不能从 Project Operations 中的 **发票列表** 页创建新发票，但在 Sales 中可以创建。 这些差异和扩展用于支持与销售订单的典型发票不同的项目的开票流程。

> [!IMPORTANT]
> 由于存在差异，请勿在 Sales 和 Project Operations 中互换使用发票。

## <a name="invoice-header"></a>发票标头

在 Project Operations 中的估价发票标头上，可以找到以下信息。

| 字段 | 地点 | 描述 | 下游影响 |
| --- | --- | --- | --- |
| **发票编码** | **摘要** 选项卡 | 创建估价发票时自动生成的 ID。 一个被锁定无法编辑的只读字段。 | 此字段用作每个估价发票的引用。 |
| **客户** | **摘要** 选项卡 | 默认设置为项目合同的名称。 用户可以编辑此字段。 | &nbsp;  |
| **货币** | **摘要** 选项卡 | 默认设置为项目合同的货币。 一个被锁定无法编辑的只读字段。 |&nbsp; |
| **价目表** | **摘要** 选项卡 | 默认设置为项目合同的价目表。 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **商机** | **摘要** 选项卡 | 对链接商机的引用。 一个被锁定无法编辑的只读字段。 | &nbsp;  |
| **合同** | **摘要** 选项卡 | 对链接的项目合同的引用。 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **客户** | **摘要** 选项卡 | 对链接的项目合同的引用。 一个被锁定无法编辑的只读字段。 |&nbsp;  |
| **说明** | **摘要** 选项卡 | 描述发票的文本字段。 用户可以编辑此字段。 | &nbsp; |
| **帐单邮寄地址** 和相关字段 | **摘要选项卡** | 默认值根据项目合同客户设置。 用户可以编辑此字段。  | &nbsp; |
| **状态** | **摘要** 选项卡 | 设置以下选项：**可用**、**已结束**、**已支付** 和 **已取消**，可由用户进行编辑。 | Project Operations 不支持的状态包括 **已结束** 和 **已取消**。 </br> 创建发票后，此状态设置为 **可用**。 </br>此状态应该仅在发票确认后设置为 **已支付**。 |
| **项目发票状态** | **摘要** 选项卡 | 设置以下选项：**草稿**、**审查中** 和 **已确认**，可由用户进行编辑。 | 在 **草稿** 和 **审查中** 状态下，发票可以编辑。 在确认后发票无法编辑。 |
| **明细金额** | **摘要** 选项卡 | 预付款和扣款后所有发票明细上金额的总和。 一个被锁定无法编辑的只读字段。 | 此字段用于计算最终金额。 |
| **折扣(%)** | **摘要** 选项卡 | 可以编辑此字段来输入折扣百分比。 Project Operations 功能不支持此字段。 | 这是不受支持的字段。 |
| **折扣金额** | **摘要** 选项卡 | 可以编辑此字段来输入折扣金额。 Project Operations 功能不支持此字段。 | 这是不受支持的字段。 |
| **不含运费金额** | **摘要选项卡** | 应用折扣后的发票总额。 一个被锁定无法编辑的只读字段。 | 此字段用于计算最终金额。 |
| **运费金额** | **摘要** 选项卡 | 可以编辑此字段来输入运费金额。 Project Operations 功能不支持此字段。 | 这是不受支持的字段。 |
| **总税款** | **摘要** 选项卡 | 发票上所有发票明细中的总税款。 一个被锁定无法编辑的只读字段。 | 无。 |
| **总金额** | **摘要** 选项卡 | 应用折扣和税款之后的金额总和。 | 总和是客户需要支付的金额。 |

## <a name="project-based-invoice-lines"></a>基于项目的发票明细

在 Project Operations 中，每个项目合同子项一直会有一个发票明细。 即使没有实际值，也会创建发票明细。 估价发票明细上可以找到以下信息。

| 字段 | 地点 | 描述 | 下游影响 |
| --- | --- | --- | --- |
| **发票编码** | **常规** 选项卡 | 对发票编码的引用。 一个被锁定无法编辑的只读字段。 | 发票编码链接可用于导航回发票标头。 |
| **客户** | **常规** 选项卡 | 根据合同子项名称默认设置的发票明细的名称。 用户可以编辑此字段。 | &nbsp; |
| **Project** | **常规** 选项卡 | 相关项目合同子项上的项目。 一个被锁定无法编辑的只读字段。 | 项目链接可用于导航到项目。 |
| **记帐方法** | **常规** 选项卡 | 相关项目合同子项上的计费方法。 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **合同子项金额** | **常规** 选项卡 | 相关项目合同子项上的合同金额。 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **已开发票的截止日期** | **常规** 选项卡 | 此发票所有发票明细详细信息上的金额总和。 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **金额** | **常规** 选项卡 | 此发票所有应计费发票明细详细信息上的金额总和。 一个被锁定无法编辑的只读字段。 | 此字段用于计算发票标头上的最终金额。 |
| **税款** | **常规** 选项卡 | 此发票明细所有发票明细详细信息上的税额总和。 一个被锁定无法编辑的只读字段。 | 此字段用于计算发票标头上的最终税额。 |
| **应收净额** | **常规** 选项卡 | 此发票明细所有应计费发票明细详细信息上总金额（**税款 + 金额**）的总和。 一个被锁定无法编辑的只读字段。 | 此字段用于计算发票标头上的最终金额。 |

## <a name="invoice-line-details"></a>发票明细详细信息

项目发票中的每个发票明细都包含发票明细详细信息。 这些明细详细信息与未记帐实际销售额以及与发票明细所引用的合同子项相关的里程碑相关。 所有这些交易均标记为 **可开票**。

对于 **时间和材料发票** 明细，发票明细详细信息在 **发票明细** 页分组为 **应计费**、**非应计费** 和 **免费**。 **应计费发票明细** 详细信息加总为发票明细总额。 **免费** 和 **非应计费实际值** 不会加到发票明细总额中。

对于 **固定价格发票** 明细，发票明细详细信息从相关合同子项上标记为 **可开票** 的里程碑创建。 从里程碑创建发票明细详细信息后，里程碑上的计费状态将更新为 **客户发票已创建**。

### <a name="edit-invoice-line-details"></a>编辑发票明细详细信息

由未记帐实际销售额支持的发票明细详细信息中有以下字段。

| 字段 | 描述 | 下游影响 |
| --- | --- | --- |
| **发票明细** | 对 **发票明细 ID** 的引用。 只读字段，已锁定以进行编辑。 | 此链接可用于导航回发票标头。 |
| **说明** | 发票明细详细信息的说明。 默认根据 **时间条目** 上的 **内部注释** 字段和 **支出条目** 上的 **说明** 字段设置。 用户可以编辑此字段。| &nbsp; |
| **外部说明** | 发票明细详细信息的说明。 默认根据 **时间条目** 上的 **外部注释** 字段和 **支出条目** 上的 **说明** 字段设置。 用户可以编辑此字段。 | 此说明可用于确定将发送给客户的打印发票上应包含的信息。 在 Project Operations 中，估价发票不具备配置发票打印设置所需的全部功能。 |
| **开始日期** | 默认根据源实际值设置。 一个被锁定无法编辑的只读字段。 | 可以在不由源实际值支持的新发票明细详细信息上编辑此字段。 |
| **Project** | 默认根据源实际值设置。 一个被锁定无法编辑的只读字段。 | 默认设置为相关合同子项上的项目。 |
| **任务** | 默认根据源实际值设置。 一个被锁定无法编辑的只读字段。 | 可以在不由源实际值支持的新发票明细详细信息上编辑此字段。 下拉列表显示与相关项目合同子项关联的所有任务。  |
| **交易类别** | 默认根据源实际值设置。 一个被锁定无法编辑的只读字段。 | 可以在不由实际源支持的新发票明细详细信息上编辑此字段。 |
| **角色** | 默认根据源实际值设置。 一个被锁定无法编辑的只读字段。 | 可以在不由源实际值支持的新发票明细详细信息上编辑此字段。 |
| **可预订资源** | 默认根据源实际值设置。 一个被锁定无法编辑的只读字段。 | 可以在不由实际源支持的新发票明细详细信息上编辑此字段。 |
| **资源供给公司** | 默认根据源实际值设置。 一个被锁定无法编辑的只读字段。 | 可以在不由源实际值支持的新发票明细详细信息上编辑此字段。 |
| **资源单位** | 默认根据源实际值设置。 一个被锁定无法编辑的只读字段。 | 可以在不由源实际值支持的新发票明细详细信息上编辑此字段。 |
| **数量** | 默认根据源实际值设置。 一个被锁定无法编辑的只读字段。 | 可以在不由源实际值支持的新发票明细详细信息上编辑此字段。 |
| **单位计划** | 对于时间发票明细详细信息，此值始终设置为时间，且无法编辑。 对于支出，此值默认根据源支出实际值设置。 一个被锁定无法编辑的只读字段。 | 默认设置为不由实际值支持的新发票明细详细信息上的 **时间**。 |
| **计价单位** | 默认根据源实际值设置。 一个被锁定无法编辑的只读字段。 | 可以在不由源实际值支持的新发票明细详细信息上编辑此字段 |
| **单价** | 默认根据源实际值设置。 一个被锁定无法编辑的只读字段。 | 可以在不由源实际值支持的新发票明细详细信息上编辑此字段。 如果未输入值，默认在 **保存** 后设置。 |
| **货币** | 默认根据源实际值设置。 一个被锁定无法编辑的只读字段。 | 默认在创建不由实际值支持的新发票详细信息时根据发票标头设置。  一个被锁定无法编辑的只读字段。 |
| **金额** | 默认根据源实际值设置。 一个被锁定无法编辑的只读字段。 | 在创建没有支持实际值的新发票详细信息时计算公式为 **数量\*价格**。 在 **保存** 后计算。 一个被锁定无法编辑的只读字段。 |
| **税款** | 默认根据源实际值设置。 用户可以编辑此字段 | 在创建没有支持实际值的新发票明细详细信息时，用户可以编辑此字段。 |
| **应收净额** | 计算字段，计算公式为 **金额 + 税款**。 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **记帐类型** | 默认根据源实际值设置。 用户可以编辑此字段。 | 选择 **应计费** 会将此明细添加到发票明细总额中。 **免费** 和 **非应计费** 将在发票明细总额中排除此值。 |
| **交易类型** | 默认根据源实际值设置。 一个被锁定无法编辑的只读字段。 | 默认设置为 **已记帐销售额**，在创建没有支持实际值的新 **发票明细详细信息** 时锁定。  |
| **交易分类** | 默认根据源实际值设置。 一个被锁定无法编辑的只读字段。 | 默认根据另外还创建不由实际值支持的新 **发票明细详细信息** 时，用户选择创建 **时间**、**支出** 还是 **费用** 发票明细详细信息来设置。 已锁定，无法编辑。 |

由里程碑支持的发票明细详细信息中有以下字段：

| 字段 | 描述 | 下游影响 |
| --- | --- | --- |
| **发票明细** | 对 **发票明细 ID** 的引用。 一个被锁定无法编辑的只读字段。 | 此链接可用于导航回发票标头。 |
| **说明** | 发票明细详细信息的说明。 默认根据源里程碑的说明设置。 | &nbsp; |
|**外部说明** | 默认根据源里程碑的说明设置的发票明细详细信息的说明。 | 此字段可用于确定将发送给客户的打印发票上应包含的信息。 Project Operations 中的估价发票不具备配置发票打印设置所需的全部功能。 |
| **开始日期** | 默认根据源里程碑上的 **里程碑** 日期。 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **Project** | 默认根据源里程碑设置。 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **任务** | 默认根据源里程碑设置。 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **交易类别** | 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **角色** | 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **可预订资源** | 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **资源单位** | 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **单位计划** | 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **计价单位** | 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **单价** | 默认根据源里程碑上的金额设置。 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **货币** | 默认根据源里程碑设置。 一个被锁定无法编辑的只读字段。 |&nbsp; |
| **金额** | 默认根据源里程碑上的金额设置。 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **税款** | 默认根据源里程碑上的税额设置。 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **应收净额** | 默认根据源里程碑上的应收净额设置。 用户可以编辑此字段 | &nbsp; |
| **记帐类型** | 始终默认设置为 **应计费**。 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **交易类型** | 默认根据源里程碑设置。 一个被锁定无法编辑的只读字段。 | &nbsp; |
| **交易分类** | 默认根据源里程碑设置。 一个被锁定无法编辑的只读字段。 | &nbsp; |

## <a name="refresh-invoice-transactions"></a>刷新发票交易

如果您有发票创建后生成的实际值，可以将这些实际值包括在发票中。

1. 在 **计费积压视图** 中，将数据标记为 **可开票**。   
2. 打开草稿估价发票，在功能区 **操作** 上，单击 **刷新发票明细交易**。

  这将为任何日期在过去且标记为 **可开票** 的实际值创建发票明细详细信息；但不包含在发票中。


[!INCLUDE[footer-include](../includes/footer-banner.md)]