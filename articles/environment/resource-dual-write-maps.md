---
title: Project Operations 双重写入映射版本
description: 本主题提供 Dynamics 365 Project Operations 所需的双重写入映射的列表。
author: sigitac
manager: Annbe
ms.date: 04/22/2021
ms.topic: article
ms.service: project-operations
ms.reviewer: kfend
ms.author: sigitac
ms.openlocfilehash: fa0342985f2c860cd3cb3f686f0dcaa59d8cfd41
ms.sourcegitcommit: bc51629df94c164325cf2afee387d0e7cda66da7
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/23/2021
ms.locfileid: "5938953"
---
# <a name="project-operations-dual-write-map-versions"></a><span data-ttu-id="147ee-103">Project Operations 双重写入映射版本</span><span class="sxs-lookup"><span data-stu-id="147ee-103">Project Operations dual-write map versions</span></span>

<span data-ttu-id="147ee-104">_**适用于：** 面向资源/非库存场景的 Project Operations_</span><span class="sxs-lookup"><span data-stu-id="147ee-104">_**Applies To:** Project Operations for resource/non-stocked based scenarios_</span></span>

<span data-ttu-id="147ee-105">在资源/非库存场景中使用 Dynamics 365 Project Operations 需要在环境中运行一组双重写入映射。</span><span class="sxs-lookup"><span data-stu-id="147ee-105">Using Dynamics 365 Project Operations for resource/non-stocked scenarios requires a set of dual-write maps to be running in the environment.</span></span> 

## <a name="prerequisite-maps-dual-write-orchestration-solution"></a><span data-ttu-id="147ee-106">必备映射：双重写入业务流程解决方案</span><span class="sxs-lookup"><span data-stu-id="147ee-106">Prerequisite maps: Dual-write orchestration solution</span></span>

<span data-ttu-id="147ee-107">以下映射是 Project Operations 解决方案的必备先决条件。</span><span class="sxs-lookup"><span data-stu-id="147ee-107">The following maps are required prerequisites for the Project Operations solution.</span></span> <span data-ttu-id="147ee-108">请确保在您的环境中运行下表中列出的映射以及所有相关的表映射。</span><span class="sxs-lookup"><span data-stu-id="147ee-108">Make sure to run the maps listed in the following table and any related table maps in your environment.</span></span>

| <span data-ttu-id="147ee-109">表映射</span><span class="sxs-lookup"><span data-stu-id="147ee-109">Table map</span></span> | <span data-ttu-id="147ee-110">初始同步</span><span class="sxs-lookup"><span data-stu-id="147ee-110">Initial sync</span></span> |
| --- | --- |
| <span data-ttu-id="147ee-111">分类帐 (msdyn_ledgers)</span><span class="sxs-lookup"><span data-stu-id="147ee-111">Ledger (msdyn_ledgers)</span></span> | <span data-ttu-id="147ee-112">需要对表映射和所有先决条件进行初始同步。</span><span class="sxs-lookup"><span data-stu-id="147ee-112">Requires initial sync for the table map and all prerequisites.</span></span> <span data-ttu-id="147ee-113">初始同步的主体是 Finance and Operations 应用。</span><span class="sxs-lookup"><span data-stu-id="147ee-113">Master for initial sync is Finance and Operations apps.</span></span> |
| <span data-ttu-id="147ee-114">法人 (cdm_companies)</span><span class="sxs-lookup"><span data-stu-id="147ee-114">Legal entities (cdm_companies)</span></span> | <span data-ttu-id="147ee-115">不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-115">Not required.</span></span> <span data-ttu-id="147ee-116">使用双重写入链接环境时，系统会自动填充此实体。</span><span class="sxs-lookup"><span data-stu-id="147ee-116">The system populates this entity automatically when environments are linked using dual-write.</span></span> |
| <span data-ttu-id="147ee-117">客户 V3 (accounts)</span><span class="sxs-lookup"><span data-stu-id="147ee-117">Customers V3 (accounts)</span></span> | <span data-ttu-id="147ee-118">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-118">Not required for provisioning.</span></span> |
| <span data-ttu-id="147ee-119">供应商 V2 (msdyn_vendors)</span><span class="sxs-lookup"><span data-stu-id="147ee-119">Vendors V2 (msdyn_vendors)</span></span> | <span data-ttu-id="147ee-120">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-120">Not required for provisioning.</span></span> |

1. <span data-ttu-id="147ee-121">从映射列表中，选择具有所有先决条件的分类帐 **(msdyn\_ledgers)** 映射，然后选中 **初始同步** 复选框。</span><span class="sxs-lookup"><span data-stu-id="147ee-121">From the list of maps, select the Ledger **(msdyn\_ledgers)** map with all prerequisites and select the **Initial sync** check box.</span></span> <span data-ttu-id="147ee-122">在 **初始同步的主体** 字段中，为分类帐映射和所有必备映射都选择 **Finance and Operations 应用**。</span><span class="sxs-lookup"><span data-stu-id="147ee-122">In the **Master for initial sync** field, select **Finance and Operations apps** for both ledger map and all prerequisite maps.</span></span> <span data-ttu-id="147ee-123">选择 **运行**。</span><span class="sxs-lookup"><span data-stu-id="147ee-123">Select **Run**.</span></span>

![分类帐映射同步](media/DW6.png)

1. <span data-ttu-id="147ee-125">对上表中列出的所有其余表映射执行相同的步骤。</span><span class="sxs-lookup"><span data-stu-id="147ee-125">Follow the same steps for all remaining table maps listed in the above table.</span></span> <span data-ttu-id="147ee-126">运行这些映射时，不要选中 **初始同步** 复选框。</span><span class="sxs-lookup"><span data-stu-id="147ee-126">Do not select the **Initial sync** check box when running those maps.</span></span>

## <a name="project-operations-dual-write-maps"></a><span data-ttu-id="147ee-127">Project Operations 双重写入映射</span><span class="sxs-lookup"><span data-stu-id="147ee-127">Project Operations dual-write maps</span></span>

<span data-ttu-id="147ee-128">以下映射是 Project Operations 解决方案所必需的。</span><span class="sxs-lookup"><span data-stu-id="147ee-128">The following maps are required for a Project Operations solution.</span></span>

| <span data-ttu-id="147ee-129">**实体映射**</span><span class="sxs-lookup"><span data-stu-id="147ee-129">**Entity map**</span></span> | <span data-ttu-id="147ee-130">**最新版本**</span><span class="sxs-lookup"><span data-stu-id="147ee-130">**Latest version**</span></span> | <span data-ttu-id="147ee-131">**初始同步**</span><span class="sxs-lookup"><span data-stu-id="147ee-131">**Initial sync**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="147ee-132">项目交易关系的集成实体 (msdyn\_transactionconnections)</span><span class="sxs-lookup"><span data-stu-id="147ee-132">Integration entity for project transaction relationships (msdyn\_transactionconnections)</span></span> | <span data-ttu-id="147ee-133">1.0.0.0</span><span class="sxs-lookup"><span data-stu-id="147ee-133">1.0.0.0</span></span> | <span data-ttu-id="147ee-134">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-134">Not required for provisioning.</span></span> |
| <span data-ttu-id="147ee-135">项目合同抬头 (sales orders)</span><span class="sxs-lookup"><span data-stu-id="147ee-135">Project contract headers (sales orders)</span></span> | <span data-ttu-id="147ee-136">1.0.0.1</span><span class="sxs-lookup"><span data-stu-id="147ee-136">1.0.0.1</span></span> | <span data-ttu-id="147ee-137">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-137">Not required for provisioning.</span></span> |
| <span data-ttu-id="147ee-138">项目合同子项 (salesorderdetails)</span><span class="sxs-lookup"><span data-stu-id="147ee-138">Project contract lines (salesorderdetails)</span></span> | <span data-ttu-id="147ee-139">1.0.0.0</span><span class="sxs-lookup"><span data-stu-id="147ee-139">1.0.0.0</span></span> | <span data-ttu-id="147ee-140">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-140">Not required for provisioning.</span></span> |
| <span data-ttu-id="147ee-141">项目资金来源 (msdyn_projectcontractsplitbillingrules)</span><span class="sxs-lookup"><span data-stu-id="147ee-141">Project funding source (msdyn_projectcontractsplitbillingrules)</span></span> | <span data-ttu-id="147ee-142">1.0.0.1</span><span class="sxs-lookup"><span data-stu-id="147ee-142">1.0.0.1</span></span> | <span data-ttu-id="147ee-143">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-143">Not required for provisioning.</span></span> |
| <span data-ttu-id="147ee-144">用于材料估算的 Project Operations 集成表 (msdyn\_estimatelines)</span><span class="sxs-lookup"><span data-stu-id="147ee-144">Project Operations integration table for material estimates (msdyn\_estimatelines)</span></span> | <span data-ttu-id="147ee-145">1.0.0.0</span><span class="sxs-lookup"><span data-stu-id="147ee-145">1.0.0.0</span></span> | <span data-ttu-id="147ee-146">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-146">Not required for provisioning.</span></span> |
| <span data-ttu-id="147ee-147">项目发票方案 V2 (invoices)</span><span class="sxs-lookup"><span data-stu-id="147ee-147">Project invoice proposals V2 (invoices)</span></span> | <span data-ttu-id="147ee-148">1.0.0.2</span><span class="sxs-lookup"><span data-stu-id="147ee-148">1.0.0.2</span></span> | <span data-ttu-id="147ee-149">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-149">Not required for provisioning.</span></span> |
| <span data-ttu-id="147ee-150">Project Operations 集成实际值 (msdyn_actuals)</span><span class="sxs-lookup"><span data-stu-id="147ee-150">Project Operations integration actuals (msdyn_actuals)</span></span> | <span data-ttu-id="147ee-151">1.0.0.14</span><span class="sxs-lookup"><span data-stu-id="147ee-151">1.0.0.14</span></span> | <span data-ttu-id="147ee-152">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-152">Not required for provisioning.</span></span> |
| <span data-ttu-id="147ee-153">Project Operations 集成合同子项里程碑 (msdyn_contractlinesscheduleofvalues)</span><span class="sxs-lookup"><span data-stu-id="147ee-153">Project Operations integration contract line milestones (msdyn_contractlinesscheduleofvalues)</span></span> | <span data-ttu-id="147ee-154">1.0.0.4</span><span class="sxs-lookup"><span data-stu-id="147ee-154">1.0.0.4</span></span> | <span data-ttu-id="147ee-155">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-155">Not required for provisioning.</span></span> |
| <span data-ttu-id="147ee-156">用于支出估算的 Project Operations 集成实体 (msdyn_estimateslines)</span><span class="sxs-lookup"><span data-stu-id="147ee-156">Project Operations integration entity for expense estimates (msdyn_estimateslines)</span></span> | <span data-ttu-id="147ee-157">1.0.0.2</span><span class="sxs-lookup"><span data-stu-id="147ee-157">1.0.0.2</span></span> | <span data-ttu-id="147ee-158">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-158">Not required for provisioning.</span></span> |
| <span data-ttu-id="147ee-159">用于工时估算的 Project Operations 集成实体 (msdyn_resourceassignments)</span><span class="sxs-lookup"><span data-stu-id="147ee-159">Project Operations integration entity for hour estimates (msdyn_resourceassignments)</span></span> | <span data-ttu-id="147ee-160">1.0.0.5</span><span class="sxs-lookup"><span data-stu-id="147ee-160">1.0.0.5</span></span> | <span data-ttu-id="147ee-161">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-161">Not required for provisioning.</span></span> |
| <span data-ttu-id="147ee-162">Project Operations 集成项目支出类别导出实体 (msdyn_expensecategories)</span><span class="sxs-lookup"><span data-stu-id="147ee-162">Project Operations integration project expense categories export entity (msdyn_expensecategories)</span></span> | <span data-ttu-id="147ee-163">1.0.0.2</span><span class="sxs-lookup"><span data-stu-id="147ee-163">1.0.0.2</span></span> | <span data-ttu-id="147ee-164">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-164">Not required for provisioning.</span></span> |
| <span data-ttu-id="147ee-165">Project Operations 集成项目支出导出实体 (msdyn_expenses)</span><span class="sxs-lookup"><span data-stu-id="147ee-165">Project Operations integration project expenses export entity (msdyn_expenses)</span></span> | <span data-ttu-id="147ee-166">1.0.0.2</span><span class="sxs-lookup"><span data-stu-id="147ee-166">1.0.0.2</span></span> | <span data-ttu-id="147ee-167">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-167">Not required for provisioning.</span></span> |
| <span data-ttu-id="147ee-168">Project Operations 集成项目供应商发票导出实体 (msdyn_projectvendorinvoices)</span><span class="sxs-lookup"><span data-stu-id="147ee-168">Project Operations integration project vendor invoice export entity (msdyn_projectvendorinvoices)</span></span> | <span data-ttu-id="147ee-169">1.0.0.0</span><span class="sxs-lookup"><span data-stu-id="147ee-169">1.0.0.0</span></span> | <span data-ttu-id="147ee-170">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-170">Not required for provisioning.</span></span> |
| <span data-ttu-id="147ee-171">Project Operations 集成项目供应商发票明细导出实体 (msdyn_projectvendorinvoicelines)</span><span class="sxs-lookup"><span data-stu-id="147ee-171">Project Operations integration project vendor invoice line export entity (msdyn_projectvendorinvoicelines)</span></span> | <span data-ttu-id="147ee-172">1.0.0.0</span><span class="sxs-lookup"><span data-stu-id="147ee-172">1.0.0.0</span></span> | <span data-ttu-id="147ee-173">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-173">Not required for provisioning.</span></span> |
| <span data-ttu-id="147ee-174">所有公司的项目资源角色 (bookableresourcecategories)</span><span class="sxs-lookup"><span data-stu-id="147ee-174">Project resource roles for all companies (bookableresourcecategories)</span></span> | <span data-ttu-id="147ee-175">1.0.0.1</span><span class="sxs-lookup"><span data-stu-id="147ee-175">1.0.0.1</span></span> | <span data-ttu-id="147ee-176">需要对表映射进行初始同步，以同步预配期间在 Dynamics 365 Dataverse 环境中填充的项目经理和团队成员资源角色。</span><span class="sxs-lookup"><span data-stu-id="147ee-176">Requires an initial sync for the table map to synchronize the Project Manager and Team member resource roles that are populated in the Dynamics 365 Dataverse environment during provisioning.</span></span> <span data-ttu-id="147ee-177">Dataverse 是初始同步的主要来源。</span><span class="sxs-lookup"><span data-stu-id="147ee-177">Dataverse is the main source for the initial synchronization.</span></span> |
| <span data-ttu-id="147ee-178">项目任务 (msdyn_projecttasks)</span><span class="sxs-lookup"><span data-stu-id="147ee-178">Project tasks (msdyn_projecttasks)</span></span> | <span data-ttu-id="147ee-179">1.0.0.4</span><span class="sxs-lookup"><span data-stu-id="147ee-179">1.0.0.4</span></span> | <span data-ttu-id="147ee-180">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-180">Not required for provisioning.</span></span> |
| <span data-ttu-id="147ee-181">项目交易类别 (msdyn_transactioncategories)</span><span class="sxs-lookup"><span data-stu-id="147ee-181">Project transaction categories (msdyn_transactioncategories)</span></span> | <span data-ttu-id="147ee-182">1.0.0.0</span><span class="sxs-lookup"><span data-stu-id="147ee-182">1.0.0.0</span></span> | <span data-ttu-id="147ee-183">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-183">Not required for provisioning.</span></span> |
| <span data-ttu-id="147ee-184">项目 V2 (msdyn_projects)</span><span class="sxs-lookup"><span data-stu-id="147ee-184">Projects V2 (msdyn_projects)</span></span> | <span data-ttu-id="147ee-185">1.0.0.1</span><span class="sxs-lookup"><span data-stu-id="147ee-185">1.0.0.1</span></span> | <span data-ttu-id="147ee-186">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="147ee-186">Not required for provisioning.</span></span> |

<span data-ttu-id="147ee-187">完成以下步骤运行列出的映射。</span><span class="sxs-lookup"><span data-stu-id="147ee-187">Complete the following steps to run the listed maps.</span></span>

1. <span data-ttu-id="147ee-188">为 **所有公司 (bookableresourcecategories)** 表映射启用项目资源角色，因为此映射需要初始同步。在 **初始同步的主体** 字段中，选择 **Common data service**。</span><span class="sxs-lookup"><span data-stu-id="147ee-188">Enable the Project resource roles for **all companies (bookableresourcecategories)** table map as this map requires the initial sync. In the **Master for initial sync** field, select **Common data service**.</span></span> 

 ![资源角色表映射同步](media/6ResourceInitialSync.jpg)

 <span data-ttu-id="147ee-190">等待映射的状态进入 **正在运行**，进行下一步。</span><span class="sxs-lookup"><span data-stu-id="147ee-190">Wait until the status of the map is **Running** before you move to the next step.</span></span>

2. <span data-ttu-id="147ee-191">选择其余所有必需映射。</span><span class="sxs-lookup"><span data-stu-id="147ee-191">Select all of the remaining required maps.</span></span> <span data-ttu-id="147ee-192">您可以在右上角的搜索中使用 **项目** 关键字在双重写入映射列表中对它们进行筛选。</span><span class="sxs-lookup"><span data-stu-id="147ee-192">You can filter them in the dual-write map list using the keyword, **Project** in search in the upper-right corner.</span></span> <span data-ttu-id="147ee-193">您可以多选所有映射，然后运行。</span><span class="sxs-lookup"><span data-stu-id="147ee-193">You can multi-select all maps and then run.</span></span> <span data-ttu-id="147ee-194">有关详细信息，请参阅[管理多个表映射](/dynamics365/fin-ops-core/dev-itpro/data-entities/dual-write/multiple-entity-maps)。</span><span class="sxs-lookup"><span data-stu-id="147ee-194">For more information, see [Manage multiple table maps](/dynamics365/fin-ops-core/dev-itpro/data-entities/dual-write/multiple-entity-maps).</span></span> <span data-ttu-id="147ee-195">确保另外还启用并运行了相关的实体映射。</span><span class="sxs-lookup"><span data-stu-id="147ee-195">Make sure to also enable and run related entity maps.</span></span>

### <a name="project-operations-dual-write-map-versions"></a><span data-ttu-id="147ee-196">Project Operations 双重写入映射版本</span><span class="sxs-lookup"><span data-stu-id="147ee-196">Project Operations dual-write map versions</span></span>

<span data-ttu-id="147ee-197">始终在您的环境中运行最新版本的映射。</span><span class="sxs-lookup"><span data-stu-id="147ee-197">Always run the latest version of the map in your environment.</span></span> <span data-ttu-id="147ee-198">如果存在以下任一情况，某些功能可能无法正常工作：</span><span class="sxs-lookup"><span data-stu-id="147ee-198">Certain features and capabilities might not work correctly if any of the following conditions exist:</span></span>

- <span data-ttu-id="147ee-199">未激活映射。</span><span class="sxs-lookup"><span data-stu-id="147ee-199">A map isn't activated.</span></span>
- <span data-ttu-id="147ee-200">未激活映射的最新版本。</span><span class="sxs-lookup"><span data-stu-id="147ee-200">The latest version of the map isn't activated.</span></span> 
- <span data-ttu-id="147ee-201">未激活相关表映射。</span><span class="sxs-lookup"><span data-stu-id="147ee-201">Related table maps aren't activated.</span></span>

<span data-ttu-id="147ee-202">您可以在 **双重写入** 页的 **版本** 列中查看映射的活动版本。</span><span class="sxs-lookup"><span data-stu-id="147ee-202">You can view the active version of the map in the **Version** column on the **Dual-write** page.</span></span> <span data-ttu-id="147ee-203">您可以通过选择 **表映射版本**，选择最新版本，然后保存所选版本来激活映射的新版本。</span><span class="sxs-lookup"><span data-stu-id="147ee-203">You can activate a new version of the map by selecting **Table map versions**, selecting the latest version, and then saving the selected version.</span></span> <span data-ttu-id="147ee-204">如果您自定义了现成的表映射，将需要重新应用更改。</span><span class="sxs-lookup"><span data-stu-id="147ee-204">If you have customized an out-of-the-box table map, you will need reapply the changes.</span></span> <span data-ttu-id="147ee-205">有关详细信息，请参阅[应用程序生命周期管理](/dynamics365/fin-ops-core/dev-itpro/data-entities/dual-write/app-lifecycle-management)。</span><span class="sxs-lookup"><span data-stu-id="147ee-205">For more information, see [Application lifecycle management](/dynamics365/fin-ops-core/dev-itpro/data-entities/dual-write/app-lifecycle-management).</span></span>
