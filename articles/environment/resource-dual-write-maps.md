---
title: Project Operations 双重写入映射版本
description: 本主题提供 Dynamics 365 Project Operations 所需的双重写入映射的列表。
author: sigitac
ms.date: 04/22/2021
ms.topic: article
ms.reviewer: kfend
ms.author: sigitac
ms.openlocfilehash: b24a20d47eefa43b2e4e184a377decdb280d436d
ms.sourcegitcommit: fd6e9ff78392c7bac35591d9130c00d2750438ae
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/12/2021
ms.locfileid: "6025763"
---
# <a name="project-operations-dual-write-map-versions"></a><span data-ttu-id="c6331-103">Project Operations 双重写入映射版本</span><span class="sxs-lookup"><span data-stu-id="c6331-103">Project Operations dual-write map versions</span></span>

<span data-ttu-id="c6331-104">_**适用于：** 面向资源/非库存场景的 Project Operations_</span><span class="sxs-lookup"><span data-stu-id="c6331-104">_**Applies To:** Project Operations for resource/non-stocked based scenarios_</span></span>

<span data-ttu-id="c6331-105">在资源/非库存场景中使用 Dynamics 365 Project Operations 需要在环境中运行一组双重写入映射。</span><span class="sxs-lookup"><span data-stu-id="c6331-105">Using Dynamics 365 Project Operations for resource/non-stocked scenarios requires a set of dual-write maps to be running in the environment.</span></span> 

## <a name="prerequisite-maps-dual-write-orchestration-solution"></a><span data-ttu-id="c6331-106">必备映射：双重写入业务流程解决方案</span><span class="sxs-lookup"><span data-stu-id="c6331-106">Prerequisite maps: Dual-write orchestration solution</span></span>

<span data-ttu-id="c6331-107">以下映射是 Project Operations 解决方案的必备先决条件。</span><span class="sxs-lookup"><span data-stu-id="c6331-107">The following maps are required prerequisites for the Project Operations solution.</span></span> <span data-ttu-id="c6331-108">请确保在您的环境中运行下表中列出的映射以及所有相关的表映射。</span><span class="sxs-lookup"><span data-stu-id="c6331-108">Make sure to run the maps listed in the following table and any related table maps in your environment.</span></span>

| <span data-ttu-id="c6331-109">表映射</span><span class="sxs-lookup"><span data-stu-id="c6331-109">Table map</span></span> | <span data-ttu-id="c6331-110">初始同步</span><span class="sxs-lookup"><span data-stu-id="c6331-110">Initial sync</span></span> |
| --- | --- |
| <span data-ttu-id="c6331-111">分类帐 (msdyn_ledgers)</span><span class="sxs-lookup"><span data-stu-id="c6331-111">Ledger (msdyn_ledgers)</span></span> | <span data-ttu-id="c6331-112">需要对表映射和所有先决条件进行初始同步。</span><span class="sxs-lookup"><span data-stu-id="c6331-112">Requires initial sync for the table map and all prerequisites.</span></span> <span data-ttu-id="c6331-113">初始同步的主体是 Finance and Operations 应用。</span><span class="sxs-lookup"><span data-stu-id="c6331-113">Master for initial sync is Finance and Operations apps.</span></span> |
| <span data-ttu-id="c6331-114">法人 (cdm_companies)</span><span class="sxs-lookup"><span data-stu-id="c6331-114">Legal entities (cdm_companies)</span></span> | <span data-ttu-id="c6331-115">不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-115">Not required.</span></span> <span data-ttu-id="c6331-116">使用双重写入链接环境时，系统会自动填充此实体。</span><span class="sxs-lookup"><span data-stu-id="c6331-116">The system populates this entity automatically when environments are linked using dual-write.</span></span> |
| <span data-ttu-id="c6331-117">客户 V3 (accounts)</span><span class="sxs-lookup"><span data-stu-id="c6331-117">Customers V3 (accounts)</span></span> | <span data-ttu-id="c6331-118">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-118">Not required for provisioning.</span></span> |
| <span data-ttu-id="c6331-119">供应商 V2 (msdyn_vendors)</span><span class="sxs-lookup"><span data-stu-id="c6331-119">Vendors V2 (msdyn_vendors)</span></span> | <span data-ttu-id="c6331-120">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-120">Not required for provisioning.</span></span> |

1. <span data-ttu-id="c6331-121">从映射列表中，选择具有所有先决条件的分类帐 **(msdyn\_ledgers)** 映射，然后选中 **初始同步** 复选框。</span><span class="sxs-lookup"><span data-stu-id="c6331-121">From the list of maps, select the Ledger **(msdyn\_ledgers)** map with all prerequisites and select the **Initial sync** check box.</span></span> <span data-ttu-id="c6331-122">在 **初始同步的主体** 字段中，为分类帐映射和所有必备映射都选择 **Finance and Operations 应用**。</span><span class="sxs-lookup"><span data-stu-id="c6331-122">In the **Master for initial sync** field, select **Finance and Operations apps** for both ledger map and all prerequisite maps.</span></span> <span data-ttu-id="c6331-123">选择 **运行**。</span><span class="sxs-lookup"><span data-stu-id="c6331-123">Select **Run**.</span></span>

![分类帐映射同步](media/DW6.png)

2. <span data-ttu-id="c6331-125">对上表中列出的所有其余表映射执行相同的步骤。</span><span class="sxs-lookup"><span data-stu-id="c6331-125">Follow the same steps for all remaining table maps listed in the above table.</span></span> <span data-ttu-id="c6331-126">运行这些映射时，不要选中 **初始同步** 复选框。</span><span class="sxs-lookup"><span data-stu-id="c6331-126">Do not select the **Initial sync** check box when running those maps.</span></span>

## <a name="project-operations-dual-write-maps"></a><span data-ttu-id="c6331-127">Project Operations 双重写入映射</span><span class="sxs-lookup"><span data-stu-id="c6331-127">Project Operations dual-write maps</span></span>

<span data-ttu-id="c6331-128">以下映射是 Project Operations 解决方案所必需的。</span><span class="sxs-lookup"><span data-stu-id="c6331-128">The following maps are required for a Project Operations solution.</span></span> <span data-ttu-id="c6331-129">从 Project Operations 的 2021 年 5 月更新版本 4.10.0.186 开始列出了双重写入映射版本。</span><span class="sxs-lookup"><span data-stu-id="c6331-129">Dual-write map versions are listed starting with the Project Operations May 2021 update, version 4.10.0.186.</span></span>

| <span data-ttu-id="c6331-130">**实体映射**</span><span class="sxs-lookup"><span data-stu-id="c6331-130">**Entity map**</span></span> | <span data-ttu-id="c6331-131">**最新版本**</span><span class="sxs-lookup"><span data-stu-id="c6331-131">**Latest version**</span></span> | <span data-ttu-id="c6331-132">**初始同步**</span><span class="sxs-lookup"><span data-stu-id="c6331-132">**Initial sync**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c6331-133">项目交易关系的集成实体 (msdyn\_transactionconnections)</span><span class="sxs-lookup"><span data-stu-id="c6331-133">Integration entity for project transaction relationships (msdyn\_transactionconnections)</span></span> | <span data-ttu-id="c6331-134">1.0.0.0</span><span class="sxs-lookup"><span data-stu-id="c6331-134">1.0.0.0</span></span> | <span data-ttu-id="c6331-135">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-135">Not required for provisioning.</span></span> |
| <span data-ttu-id="c6331-136">项目合同抬头 (sales orders)</span><span class="sxs-lookup"><span data-stu-id="c6331-136">Project contract headers (sales orders)</span></span> | <span data-ttu-id="c6331-137">1.0.0.1</span><span class="sxs-lookup"><span data-stu-id="c6331-137">1.0.0.1</span></span> | <span data-ttu-id="c6331-138">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-138">Not required for provisioning.</span></span> |
| <span data-ttu-id="c6331-139">项目合同子项 (salesorderdetails)</span><span class="sxs-lookup"><span data-stu-id="c6331-139">Project contract lines (salesorderdetails)</span></span> | <span data-ttu-id="c6331-140">1.0.0.0</span><span class="sxs-lookup"><span data-stu-id="c6331-140">1.0.0.0</span></span> | <span data-ttu-id="c6331-141">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-141">Not required for provisioning.</span></span> |
| <span data-ttu-id="c6331-142">项目资金来源 (msdyn_projectcontractsplitbillingrules)</span><span class="sxs-lookup"><span data-stu-id="c6331-142">Project funding source (msdyn_projectcontractsplitbillingrules)</span></span> | <span data-ttu-id="c6331-143">1.0.0.2</span><span class="sxs-lookup"><span data-stu-id="c6331-143">1.0.0.2</span></span> | <span data-ttu-id="c6331-144">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-144">Not required for provisioning.</span></span> |
| <span data-ttu-id="c6331-145">用于材料估算的 Project Operations 集成表 (msdyn\_estimatelines)</span><span class="sxs-lookup"><span data-stu-id="c6331-145">Project Operations integration table for material estimates (msdyn\_estimatelines)</span></span> | <span data-ttu-id="c6331-146">1.0.0.0</span><span class="sxs-lookup"><span data-stu-id="c6331-146">1.0.0.0</span></span> | <span data-ttu-id="c6331-147">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-147">Not required for provisioning.</span></span> |
| <span data-ttu-id="c6331-148">项目发票方案 V2 (invoices)</span><span class="sxs-lookup"><span data-stu-id="c6331-148">Project invoice proposals V2 (invoices)</span></span> | <span data-ttu-id="c6331-149">1.0.0.3</span><span class="sxs-lookup"><span data-stu-id="c6331-149">1.0.0.3</span></span> | <span data-ttu-id="c6331-150">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-150">Not required for provisioning.</span></span> |
| <span data-ttu-id="c6331-151">Project Operations 集成实际值 (msdyn_actuals)</span><span class="sxs-lookup"><span data-stu-id="c6331-151">Project Operations integration actuals (msdyn_actuals)</span></span> | <span data-ttu-id="c6331-152">1.0.0.14</span><span class="sxs-lookup"><span data-stu-id="c6331-152">1.0.0.14</span></span> | <span data-ttu-id="c6331-153">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-153">Not required for provisioning.</span></span> |
| <span data-ttu-id="c6331-154">Project Operations 集成合同子项里程碑 (msdyn_contractlinesscheduleofvalues)</span><span class="sxs-lookup"><span data-stu-id="c6331-154">Project Operations integration contract line milestones (msdyn_contractlinesscheduleofvalues)</span></span> | <span data-ttu-id="c6331-155">1.0.0.4</span><span class="sxs-lookup"><span data-stu-id="c6331-155">1.0.0.4</span></span> | <span data-ttu-id="c6331-156">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-156">Not required for provisioning.</span></span> |
| <span data-ttu-id="c6331-157">用于支出估算的 Project Operations 集成实体 (msdyn_estimateslines)</span><span class="sxs-lookup"><span data-stu-id="c6331-157">Project Operations integration entity for expense estimates (msdyn_estimateslines)</span></span> | <span data-ttu-id="c6331-158">1.0.0.2</span><span class="sxs-lookup"><span data-stu-id="c6331-158">1.0.0.2</span></span> | <span data-ttu-id="c6331-159">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-159">Not required for provisioning.</span></span> |
| <span data-ttu-id="c6331-160">用于工时估算的 Project Operations 集成实体 (msdyn_resourceassignments)</span><span class="sxs-lookup"><span data-stu-id="c6331-160">Project Operations integration entity for hour estimates (msdyn_resourceassignments)</span></span> | <span data-ttu-id="c6331-161">1.0.0.5</span><span class="sxs-lookup"><span data-stu-id="c6331-161">1.0.0.5</span></span> | <span data-ttu-id="c6331-162">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-162">Not required for provisioning.</span></span> |
| <span data-ttu-id="c6331-163">Project Operations 集成项目支出类别导出实体 (msdyn_expensecategories)</span><span class="sxs-lookup"><span data-stu-id="c6331-163">Project Operations integration project expense categories export entity (msdyn_expensecategories)</span></span> | <span data-ttu-id="c6331-164">1.0.0.1</span><span class="sxs-lookup"><span data-stu-id="c6331-164">1.0.0.1</span></span> | <span data-ttu-id="c6331-165">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-165">Not required for provisioning.</span></span> |
| <span data-ttu-id="c6331-166">Project Operations 集成项目支出导出实体 (msdyn_expenses)</span><span class="sxs-lookup"><span data-stu-id="c6331-166">Project Operations integration project expenses export entity (msdyn_expenses)</span></span> | <span data-ttu-id="c6331-167">1.0.0.2</span><span class="sxs-lookup"><span data-stu-id="c6331-167">1.0.0.2</span></span> | <span data-ttu-id="c6331-168">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-168">Not required for provisioning.</span></span> |
| <span data-ttu-id="c6331-169">Project Operations 集成项目供应商发票导出实体 (msdyn_projectvendorinvoices)</span><span class="sxs-lookup"><span data-stu-id="c6331-169">Project Operations integration project vendor invoice export entity (msdyn_projectvendorinvoices)</span></span> | <span data-ttu-id="c6331-170">1.0.0.0</span><span class="sxs-lookup"><span data-stu-id="c6331-170">1.0.0.0</span></span> | <span data-ttu-id="c6331-171">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-171">Not required for provisioning.</span></span> |
| <span data-ttu-id="c6331-172">Project Operations 集成项目供应商发票明细导出实体 (msdyn_projectvendorinvoicelines)</span><span class="sxs-lookup"><span data-stu-id="c6331-172">Project Operations integration project vendor invoice line export entity (msdyn_projectvendorinvoicelines)</span></span> | <span data-ttu-id="c6331-173">1.0.0.1</span><span class="sxs-lookup"><span data-stu-id="c6331-173">1.0.0.1</span></span> | <span data-ttu-id="c6331-174">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-174">Not required for provisioning.</span></span> |
| <span data-ttu-id="c6331-175">所有公司的项目资源角色 (bookableresourcecategories)</span><span class="sxs-lookup"><span data-stu-id="c6331-175">Project resource roles for all companies (bookableresourcecategories)</span></span> | <span data-ttu-id="c6331-176">1.0.0.1</span><span class="sxs-lookup"><span data-stu-id="c6331-176">1.0.0.1</span></span> | <span data-ttu-id="c6331-177">需要对表映射进行初始同步，以同步预配期间在 Dynamics 365 Dataverse 环境中填充的项目经理和团队成员资源角色。</span><span class="sxs-lookup"><span data-stu-id="c6331-177">Requires an initial sync for the table map to synchronize the Project Manager and Team member resource roles that are populated in the Dynamics 365 Dataverse environment during provisioning.</span></span> <span data-ttu-id="c6331-178">Dataverse 是初始同步的主要来源。</span><span class="sxs-lookup"><span data-stu-id="c6331-178">Dataverse is the main source for the initial synchronization.</span></span> |
| <span data-ttu-id="c6331-179">项目任务 (msdyn_projecttasks)</span><span class="sxs-lookup"><span data-stu-id="c6331-179">Project tasks (msdyn_projecttasks)</span></span> | <span data-ttu-id="c6331-180">1.0.0.4</span><span class="sxs-lookup"><span data-stu-id="c6331-180">1.0.0.4</span></span> | <span data-ttu-id="c6331-181">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-181">Not required for provisioning.</span></span> |
| <span data-ttu-id="c6331-182">项目交易类别 (msdyn_transactioncategories)</span><span class="sxs-lookup"><span data-stu-id="c6331-182">Project transaction categories (msdyn_transactioncategories)</span></span> | <span data-ttu-id="c6331-183">1.0.0.0</span><span class="sxs-lookup"><span data-stu-id="c6331-183">1.0.0.0</span></span> | <span data-ttu-id="c6331-184">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-184">Not required for provisioning.</span></span> |
| <span data-ttu-id="c6331-185">项目 V2 (msdyn_projects)</span><span class="sxs-lookup"><span data-stu-id="c6331-185">Projects V2 (msdyn_projects)</span></span> | <span data-ttu-id="c6331-186">1.0.0.2</span><span class="sxs-lookup"><span data-stu-id="c6331-186">1.0.0.2</span></span> | <span data-ttu-id="c6331-187">预配时不需要。</span><span class="sxs-lookup"><span data-stu-id="c6331-187">Not required for provisioning.</span></span> |

<span data-ttu-id="c6331-188">完成以下步骤运行列出的映射。</span><span class="sxs-lookup"><span data-stu-id="c6331-188">Complete the following steps to run the listed maps.</span></span>

1. <span data-ttu-id="c6331-189">为 **所有公司 (bookableresourcecategories)** 表映射启用项目资源角色，因为此映射需要初始同步。在 **初始同步的主体** 字段中，选择 **Common data service**。</span><span class="sxs-lookup"><span data-stu-id="c6331-189">Enable the Project resource roles for **all companies (bookableresourcecategories)** table map as this map requires the initial sync. In the **Master for initial sync** field, select **Common data service**.</span></span> 

 ![资源角色表映射同步](media/6ResourceInitialSync.jpg)

 <span data-ttu-id="c6331-191">等待映射的状态进入 **正在运行**，进行下一步。</span><span class="sxs-lookup"><span data-stu-id="c6331-191">Wait until the status of the map is **Running** before you move to the next step.</span></span>

2. <span data-ttu-id="c6331-192">选择其余所有必需映射。</span><span class="sxs-lookup"><span data-stu-id="c6331-192">Select all of the remaining required maps.</span></span> <span data-ttu-id="c6331-193">您可以在右上角的搜索中使用 **项目** 关键字在双重写入映射列表中对它们进行筛选。</span><span class="sxs-lookup"><span data-stu-id="c6331-193">You can filter them in the dual-write map list using the keyword, **Project** in search in the upper-right corner.</span></span> <span data-ttu-id="c6331-194">您可以多选所有映射，然后运行。</span><span class="sxs-lookup"><span data-stu-id="c6331-194">You can multi-select all maps and then run.</span></span> <span data-ttu-id="c6331-195">有关详细信息，请参阅[管理多个表映射](/dynamics365/fin-ops-core/dev-itpro/data-entities/dual-write/multiple-entity-maps)。</span><span class="sxs-lookup"><span data-stu-id="c6331-195">For more information, see [Manage multiple table maps](/dynamics365/fin-ops-core/dev-itpro/data-entities/dual-write/multiple-entity-maps).</span></span> <span data-ttu-id="c6331-196">确保另外还启用并运行了相关的实体映射。</span><span class="sxs-lookup"><span data-stu-id="c6331-196">Make sure to also enable and run related entity maps.</span></span>

### <a name="project-operations-dual-write-map-versions"></a><span data-ttu-id="c6331-197">Project Operations 双重写入映射版本</span><span class="sxs-lookup"><span data-stu-id="c6331-197">Project Operations dual-write map versions</span></span>

<span data-ttu-id="c6331-198">始终在您的环境中运行最新版本的映射。</span><span class="sxs-lookup"><span data-stu-id="c6331-198">Always run the latest version of the map in your environment.</span></span> <span data-ttu-id="c6331-199">如果存在以下任一情况，某些功能可能无法正常工作：</span><span class="sxs-lookup"><span data-stu-id="c6331-199">Certain features and capabilities might not work correctly if any of the following conditions exist:</span></span>

- <span data-ttu-id="c6331-200">未激活映射。</span><span class="sxs-lookup"><span data-stu-id="c6331-200">A map isn't activated.</span></span>
- <span data-ttu-id="c6331-201">未激活映射的最新版本。</span><span class="sxs-lookup"><span data-stu-id="c6331-201">The latest version of the map isn't activated.</span></span> 
- <span data-ttu-id="c6331-202">未激活相关表映射。</span><span class="sxs-lookup"><span data-stu-id="c6331-202">Related table maps aren't activated.</span></span>

<span data-ttu-id="c6331-203">您可以在 **双重写入** 页的 **版本** 列中查看映射的活动版本。</span><span class="sxs-lookup"><span data-stu-id="c6331-203">You can view the active version of the map in the **Version** column on the **Dual-write** page.</span></span> <span data-ttu-id="c6331-204">您可以通过选择 **表映射版本**，选择最新版本，然后保存所选版本来激活映射的新版本。</span><span class="sxs-lookup"><span data-stu-id="c6331-204">You can activate a new version of the map by selecting **Table map versions**, selecting the latest version, and then saving the selected version.</span></span> <span data-ttu-id="c6331-205">如果您自定义了现成的表映射，将需要重新应用更改。</span><span class="sxs-lookup"><span data-stu-id="c6331-205">If you have customized an out-of-the-box table map, you will need reapply the changes.</span></span> <span data-ttu-id="c6331-206">有关详细信息，请参阅[应用程序生命周期管理](/dynamics365/fin-ops-core/dev-itpro/data-entities/dual-write/app-lifecycle-management)。</span><span class="sxs-lookup"><span data-stu-id="c6331-206">For more information, see [Application lifecycle management](/dynamics365/fin-ops-core/dev-itpro/data-entities/dual-write/app-lifecycle-management).</span></span>
