---
title: 项目估计值和实际值集成
description: 本主题提供有关项目估计值和实际值的 Project Operations 双重写入集成的信息。
author: sigitac
ms.date: 4/26/2021
ms.topic: article
ms.prod: ''
ms.reviewer: kfend
ms.author: sigitac
ms.openlocfilehash: d8aa1541a3560db175acead1d000895312b299db
ms.sourcegitcommit: 40f68387f594180af64a5e5c748b6efa188bd300
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/10/2021
ms.locfileid: "6000020"
---
# <a name="project-estimates-and-actuals-integration"></a><span data-ttu-id="55eb1-103">项目估计值和实际值集成</span><span class="sxs-lookup"><span data-stu-id="55eb1-103">Project estimates and actuals integration</span></span>

<span data-ttu-id="55eb1-104">_**适用于：** 面向资源/非库存场景的 Project Operations_</span><span class="sxs-lookup"><span data-stu-id="55eb1-104">_**Applies To:** Project Operations for resource/non-stocked based scenarios_</span></span>

<span data-ttu-id="55eb1-105">本主题提供有关项目估计值和实际值的 Project Operations 双重写入集成的信息。</span><span class="sxs-lookup"><span data-stu-id="55eb1-105">This topic provides information about Project Operations dual-write integration for project estimates and actuals.</span></span>

## <a name="project-estimates"></a><span data-ttu-id="55eb1-106">项目估算</span><span class="sxs-lookup"><span data-stu-id="55eb1-106">Project estimates</span></span>

<span data-ttu-id="55eb1-107">在 Microsoft Dataverse 中创建和维护项目人力、支出和材料估算，并出于会计目的将其同步到 Finance and Operations 应用。</span><span class="sxs-lookup"><span data-stu-id="55eb1-107">Project labor, expense, and material estimates are created and maintained in Microsoft Dataverse and synchronized to Finance and Operations apps for accounting purposes.</span></span> <span data-ttu-id="55eb1-108">不支持通过 Finance and Operations 应用创建、更新和删除操作。</span><span class="sxs-lookup"><span data-stu-id="55eb1-108">Create, update, and delete operations aren't supported through the Finance and Operations apps.</span></span>

<span data-ttu-id="55eb1-109">创建估算需要对项目进行有效的会计配置。</span><span class="sxs-lookup"><span data-stu-id="55eb1-109">Creating estimates requires a valid accounting configuration for the project.</span></span> <span data-ttu-id="55eb1-110">与合同子项关联的项目必须具有在项目成本和收入配置文件规则中定义的有效项目成本和收入配置文件。</span><span class="sxs-lookup"><span data-stu-id="55eb1-110">Projects that are associated with contract lines must have a valid project cost and revenue profile defined in the Project cost and revenue profile rules.</span></span> <span data-ttu-id="55eb1-111">有关详细信息，请参阅[配置收费项目会计](../project-accounting/configure-accounting-billable-projects.md#configure-project-cost-and-revenue-profile-rules)。</span><span class="sxs-lookup"><span data-stu-id="55eb1-111">For more information, see [Configure accounting for billable projects](../project-accounting/configure-accounting-billable-projects.md#configure-project-cost-and-revenue-profile-rules).</span></span>

## <a name="labor-estimates"></a><span data-ttu-id="55eb1-112">人力估算</span><span class="sxs-lookup"><span data-stu-id="55eb1-112">Labor estimates</span></span>

<span data-ttu-id="55eb1-113">人力估算由项目经理或资源经理创建，他们同时负责为项目任务分配通用或指定资源。</span><span class="sxs-lookup"><span data-stu-id="55eb1-113">Labor estimates are created by the Project Manager or Resource manager who also assigns a generic or named resource to the project task.</span></span> <span data-ttu-id="55eb1-114">可以在 Dataverse 中 **项目详细信息** 页上的 **资源分配** 选项卡上查看资源分配记录。</span><span class="sxs-lookup"><span data-stu-id="55eb1-114">Resource assignment records can be reviewed on the **Resource Assignments** tab on the **Project Details** page in Dataverse.</span></span> <span data-ttu-id="55eb1-115">Dataverse 中的资源分配记录使用 **用于工时估算的 Project Operations 集成实体 (msdyn\_resourceassignments)** 在 Finance and Operations 应用中创建工时预测记录。</span><span class="sxs-lookup"><span data-stu-id="55eb1-115">Resource assignment records in Dataverse create hour forecast records in Finance and Operations apps using **Project Operations integration entity for hour estimates (msdyn\_resourceassignments)**.</span></span>

   ![人力估算集成](./Media/DW4LaborEstimates.png)

<span data-ttu-id="55eb1-117">双重写入将资源分配记录同步到暂存表 (**ProjCDSEstimateHoursImport**)，然后使用业务逻辑创建和更新工时预测记录 (**ProjForecastEmpl**)。</span><span class="sxs-lookup"><span data-stu-id="55eb1-117">Dual-write synchronizes resource assignment records to the staging table (**ProjCDSEstimateHoursImport**), and then uses business logic to create and update hour forecast records (**ProjForecastEmpl**).</span></span>

<span data-ttu-id="55eb1-118">项目会计通过转到 **项目管理和会计** > **所有项目** > **计划** > **工时预测** 查看在 Finance and Operations 应用中创建的预测时间记录。</span><span class="sxs-lookup"><span data-stu-id="55eb1-118">The Project accountant reviews forecast hour records created in Finance and Operations apps by going to **Project management and accounting** > **All projects** > **Plan** > **Hour forecasts**.</span></span>

## <a name="expense-estimates"></a><span data-ttu-id="55eb1-119">费用估算</span><span class="sxs-lookup"><span data-stu-id="55eb1-119">Expense estimates</span></span>

<span data-ttu-id="55eb1-120">支出估算由项目经理在 Dataverse 中 **项目详细信息** 页上的 **支出估算** 选项卡上创建。</span><span class="sxs-lookup"><span data-stu-id="55eb1-120">Expense estimates are created by the Project manager on the **Expense Estimates** tab on the **Project Details** page in Dataverse.</span></span> <span data-ttu-id="55eb1-121">支出估算记录存储在 Dataverse 中的 **估算明细** 实体中。</span><span class="sxs-lookup"><span data-stu-id="55eb1-121">Expense estimate records are stored in the **Estimate Line** entity in Dataverse.</span></span> <span data-ttu-id="55eb1-122">这些估算记录的交易类为 **支出**，记录将使用 **支出估算的 Project Operations 集成实体 (msdyn\_estimatelines)** 同步到 Finance and Operations 应用中的支出预测记录。</span><span class="sxs-lookup"><span data-stu-id="55eb1-122">These estimate records have transaction class, **Expense** and are synchronized to expense forecast records in Finance and Operations apps using **Project Operations integration entity for expense estimates (msdyn\_estimatelines)**.</span></span>

   ![支出估算集成](./Media/DW4ExpenseEstimates.png)

<span data-ttu-id="55eb1-124">双重写入将支出估算记录同步到暂存表 **(ProjCDSEstimateExpenseImport)**，然后使用业务逻辑创建和更新支出预测记录 (**ProjForecastCost**)。</span><span class="sxs-lookup"><span data-stu-id="55eb1-124">Dual-write synchronizes expense estimate records to the staging table, **ProjCDSEstimateExpenseImport)** and then uses business logic to create and update expense forecast records (**ProjForecastCost**).</span></span> <span data-ttu-id="55eb1-125">估算明细分别存储销售估算和成本估算记录。</span><span class="sxs-lookup"><span data-stu-id="55eb1-125">Estimate lines store sales estimate and cost estimate records separately.</span></span> <span data-ttu-id="55eb1-126">Finance and Operations 应用中的业务逻辑使用暂存表中的这一详细信息填充单个支出预测记录。</span><span class="sxs-lookup"><span data-stu-id="55eb1-126">The business logic in Finance and Operations apps populates a single Expense forecast record using this detail in the staging table.</span></span>

<span data-ttu-id="55eb1-127">项目会计可以转到 **项目管理和会计** > **所有项目** > **计划** > **支出预测**，在 Finance and Operations 应用中查看支出预测记录。</span><span class="sxs-lookup"><span data-stu-id="55eb1-127">The Project accountant can review expense forecast records in Finance and Operations apps by going to **Project management and accounting** > **All projects** > **Plan** > **Expense forecasts**.</span></span>

## <a name="material-estimates"></a><span data-ttu-id="55eb1-128">材料估算</span><span class="sxs-lookup"><span data-stu-id="55eb1-128">Material estimates</span></span>

<span data-ttu-id="55eb1-129">材料估算由项目经理在 Dataverse 中 **项目详细信息** 页上的 **材料估算** 选项卡上创建。</span><span class="sxs-lookup"><span data-stu-id="55eb1-129">Material estimates are created by the Project manager on the **Material Estimates** tab on the **Project Details** page in Dataverse.</span></span> <span data-ttu-id="55eb1-130">材料估算记录存储在 Dataverse 中的 **估算明细** 实体中。</span><span class="sxs-lookup"><span data-stu-id="55eb1-130">Material estimate records are stored in the **Estimate Line** entity in Dataverse.</span></span> <span data-ttu-id="55eb1-131">这些估算记录的交易类为 **材料**，记录将使用 **材料估算的 Project Operations 集成表 (msdyn\_estimatelines)** 同步到 Finance and Operations 应用中的物料预测记录。</span><span class="sxs-lookup"><span data-stu-id="55eb1-131">These estimate records have the transaction class, **Material** and are synchronized to item forecast records in Finance and Operations apps using **Project integration table for material estimates (msdyn\_estimatelines)**.</span></span>

   ![材料估算集成](./Media/DW4MaterialEstimates.png)

<span data-ttu-id="55eb1-133">双重写入将材料估算记录同步到暂存表 **ProjForecastSalesImpor**，然后使用业务逻辑创建和更新物料预测记录 (**ForecastSales**)。</span><span class="sxs-lookup"><span data-stu-id="55eb1-133">Dual-write synchronizes material estimate records to the staging table **ProjForecastSalesImpor**, and then uses business logic to create and update item forecast records (**ForecastSales**).</span></span> <span data-ttu-id="55eb1-134">估算明细分别存储销售估算和成本估算记录。</span><span class="sxs-lookup"><span data-stu-id="55eb1-134">Estimate lines store sales estimate and cost estimate records separately.</span></span> <span data-ttu-id="55eb1-135">Finance and Operations 应用中的业务逻辑使用暂存表中的这一详细信息填充单个物料预测记录。</span><span class="sxs-lookup"><span data-stu-id="55eb1-135">The business logic in Finance and Operations apps populates a single Item forecast record using this detail in the staging table.</span></span>

<span data-ttu-id="55eb1-136">项目会计可以转到 **项目管理和会计** > **所有项目** > **计划** > **物料预测**，在 Finance and Operations 应用中查看物料预测记录。</span><span class="sxs-lookup"><span data-stu-id="55eb1-136">The Project accountant can review item forecast records in Finance and Operations apps by going to **Project management and accounting** > **All projects** > **Plan** > **Item forecasts**.</span></span>

## <a name="project-actuals"></a><span data-ttu-id="55eb1-137">项目实际值</span><span class="sxs-lookup"><span data-stu-id="55eb1-137">Project actuals</span></span>

<span data-ttu-id="55eb1-138">项目实际值在 Dataverse 中根据时间、支出、材料和记帐活动创建。</span><span class="sxs-lookup"><span data-stu-id="55eb1-138">Project actuals are created in Dataverse, based on time, expense, material, and billing activity.</span></span> <span data-ttu-id="55eb1-139">这些交易的所有操作属性（包括数量、成本费、售价和项目）都在此 Dataverse 实体中捕获。</span><span class="sxs-lookup"><span data-stu-id="55eb1-139">All operational attributes of these transactions including quantity, cost price, sales price, and project are captured in this Dataverse entity.</span></span> <span data-ttu-id="55eb1-140">有关详细信息，请参阅[实际值](../actuals/actuals-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="55eb1-140">For more information, see [Actuals](../actuals/actuals-overview.md).</span></span> <span data-ttu-id="55eb1-141">实际值记录将使用双重写入表映射 **Project Operations 集成实际值 (msdyn\_actuals)** 同步到 Finance and Operations 应用，以进行下游会计工作。</span><span class="sxs-lookup"><span data-stu-id="55eb1-141">Actual records are synchronized to Finance and Operations apps using the dual-write table map **Project Operations integration actuals (msdyn\_actuals)** for downstream accounting.</span></span>

   ![实际值集成](./Media/DW4Actuals.png)

<span data-ttu-id="55eb1-143">**Project Operations 集成实际值** 表映射将同步 Dataverse 中 **实际值** 实体中的所有记录，属性 **跳过同步(仅供内部使用)** 设置为 **False**。</span><span class="sxs-lookup"><span data-stu-id="55eb1-143">The **Project Operations integration actuals** table map synchronizes all the records from the **Actuals** entity in Dataverse, with the attribute **Skip Sync (internal use only)** set to **False**.</span></span> <span data-ttu-id="55eb1-144">此属性值在创建记录时在 Dataverse 中自动设置。</span><span class="sxs-lookup"><span data-stu-id="55eb1-144">This attribute value is set in Dataverse automatically when the record is created.</span></span> <span data-ttu-id="55eb1-145">将此属性设置为 **True** 的示例有：</span><span class="sxs-lookup"><span data-stu-id="55eb1-145">Examples where this attribute is set to **True** are:</span></span>

  - <span data-ttu-id="55eb1-146">内部公司交易的项目成本实际值。</span><span class="sxs-lookup"><span data-stu-id="55eb1-146">Project cost actuals for intercompany transactions.</span></span> <span data-ttu-id="55eb1-147">有关详细信息，请参阅[创建内部公司交易](../project-accounting/create-intercompany-transactions.md)。</span><span class="sxs-lookup"><span data-stu-id="55eb1-147">For more information, see [Create intercompany transactions](../project-accounting/create-intercompany-transactions.md).</span></span> <span data-ttu-id="55eb1-148">跳过这些记录是因为过帐内部公司供应商发票时，系统会在 Finance and Operations 应用中重新创建项目成本实际值。</span><span class="sxs-lookup"><span data-stu-id="55eb1-148">These records are skipped because the system recreates the project cost actual in Finance and Operations apps when the intercompany vendor invoice is posted.</span></span>
  - <span data-ttu-id="55eb1-149">确认估价发票时创建的负未记帐销售记录。</span><span class="sxs-lookup"><span data-stu-id="55eb1-149">Negative unbilled sales records created when the proforma invoice is confirmed.</span></span> <span data-ttu-id="55eb1-150">跳过这些记录是因为 Finance and Operations 应用中的项目子分类帐不会在开票时冲销未记帐销售记录，但会将状态更改为完全开票。</span><span class="sxs-lookup"><span data-stu-id="55eb1-150">These records are skipped because the project subledger in Finance and Operations apps doesn't reverse the unbilled sales record at invoicing but changes the status to fully invoiced.</span></span>

<span data-ttu-id="55eb1-151">双重写入表映射将实际值记录同步到暂存表 **ProjCDSActualsImport**。</span><span class="sxs-lookup"><span data-stu-id="55eb1-151">The dual-write table map synchronizes the actuals records to the staging table, **ProjCDSActualsImport**.</span></span> <span data-ttu-id="55eb1-152">在创建 Project Operations 集成日记帐行和项目发票方案明细时，这些记录由定期流程 **从暂存表导入** 处理。</span><span class="sxs-lookup"><span data-stu-id="55eb1-152">These records are processed by the periodic process **Import from staging table** when creating Project Operations integration journal lines and project invoice proposal lines.</span></span> <span data-ttu-id="55eb1-153">有关详细信息，请参阅 [Project Operations 中的集成日记帐](../project-accounting/project-operations-integration-journal.md)。</span><span class="sxs-lookup"><span data-stu-id="55eb1-153">For more information, see [Integration journal in Project Operations](../project-accounting/project-operations-integration-journal.md).</span></span>

<span data-ttu-id="55eb1-154">Dataverse 还会在 **交易连接** 实体中捕获项目实际值交易之间的链接。</span><span class="sxs-lookup"><span data-stu-id="55eb1-154">Dataverse also captures the links between the project actual transactions in the **Transaction connection** entity.</span></span> <span data-ttu-id="55eb1-155">有关详细信息，请参阅[将实际值链接到原始记录](../actuals/linkingactuals.md)。</span><span class="sxs-lookup"><span data-stu-id="55eb1-155">For more information, see [Link actuals to original records](../actuals/linkingactuals.md).</span></span> <span data-ttu-id="55eb1-156">实际值交易之间的链接还将使用双重写入表映射 **项目交易关系的集成实体 (msdyn\_transactionconnections)** 同步到 Finance and Operations 应用。</span><span class="sxs-lookup"><span data-stu-id="55eb1-156">Links between actual transactions are also synchronized to Finance and Operations apps using the dual-write table map, **Integration entity for project transaction relationships (msdyn\_transactionconnections)**.</span></span> <span data-ttu-id="55eb1-157">在创建 Project Operations 集成日记帐行和项目发票方案明细时，这些记录由定期流程 **从暂存表导入** 使用。</span><span class="sxs-lookup"><span data-stu-id="55eb1-157">These records are used by the periodic process, **Import from staging table** when creating Project Operations integration journal lines and Project invoice proposal lines.</span></span>

<span data-ttu-id="55eb1-158">过帐 Project Operations 集成日记帐和项目发票方案将触发暂存表 **ProjCDSActualsImport** 中相应记录的更新。</span><span class="sxs-lookup"><span data-stu-id="55eb1-158">Posting a Project Operations integration journal and a project invoice proposal triggers an update in respective records in the staging table, **ProjCDSActualsImport**.</span></span> <span data-ttu-id="55eb1-159">系统将捕获并记录实际值交易的以下会计属性：</span><span class="sxs-lookup"><span data-stu-id="55eb1-159">The system captures and records the following accounting attributes for actuals transactions:</span></span>

- <span data-ttu-id="55eb1-160">会计币种金额</span><span class="sxs-lookup"><span data-stu-id="55eb1-160">Accounting currency amount</span></span>
- <span data-ttu-id="55eb1-161">汇率</span><span class="sxs-lookup"><span data-stu-id="55eb1-161">Exchange rate</span></span>
- <span data-ttu-id="55eb1-162">凭证号</span><span class="sxs-lookup"><span data-stu-id="55eb1-162">Voucher number</span></span>
- <span data-ttu-id="55eb1-163">销售税金额</span><span class="sxs-lookup"><span data-stu-id="55eb1-163">Sales tax amount</span></span>

<span data-ttu-id="55eb1-164">**Project Operations 集成实际值** 表映射使用此信息更新 Dataverse 中的相应实际值记录。</span><span class="sxs-lookup"><span data-stu-id="55eb1-164">The **Project Operations integration actuals** table map updates respective actuals records in Dataverse with this information.</span></span>
