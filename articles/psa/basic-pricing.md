---
title: 项目定价
description: 此主题介绍 Dynamics 365 Project Service Automation 中的定价工作原理。
author: rumant
manager: kfend
ms.service: dynamics-365-customerservice
ms.custom:
- dyn365-projectservice
ms.date: 03/11/2019
ms.topic: article
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
- ProjectOperations
ms.openlocfilehash: b319f9be9fd72ac99ce6012b6baffde812e3077d
ms.sourcegitcommit: 5c4c9bf3ba018562d6cb3443c01d550489c415fa
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/16/2020
ms.locfileid: "4072801"
---
# <a name="project-pricing"></a>项目定价 

[!INCLUDE[cc-applies-to-psa-app-3.x](../includes/cc-applies-to-psa-app-3x.md)]

Dynamics 365 Project Service Automation 扩展了 Dynamics 365 Sales 中的价目表实体。 

## <a name="key-entities"></a>关键实体

价目表中包含四个不同实体提供的信息：

- **价目表** - 此实体存储有关定价时间的上下文、货币、时效和时间单位的信息。 上下文显示价目表表示成本费率还是销售额费率。 
- **货币** - 此实体存储价目表的价格货币。 
- **日期** - 系统尝试输入交易的默认价格时，使用此实体。 PSA 定价选择其时效包含交易日期的价目表。 如果 PSA 定价找到多个对附加到相关报价单的交易日期有效的价目表，则不设置任何默认价格。 
- **时间** - 此实体存储用于表示价格的时间单位，如天费率或小时费率。 

价目表实体有三个用于存储价格的相关表：

  - **角色价格** - 此表存储角色与部门值组合的费率，用于为人力资源设置基于角色的价格。
  - **交易类别价格** - 此表按交易类别存储价格，用于设置支出类别价格。
  - **价目表项** - 此表存储目录产品的价格。

> ![使用价目表配置价格](media/basic-guide-12.png)
 
价目表是费率卡。 费率卡是价目表实体与角色价格、交易类别价格和价目表项表中的相关行的组合。

## <a name="resource-roles"></a>资源角色

术语 *资源角色* 指的是要对项目执行一组特定任务的人员必须拥有的一组技能、资格和认证。

人力资源时间的报价通常基于资源在特定项目中的角色。 对于人力资源时间，PSA 支持基于资源角色定成本和记帐。 可以使用 **时间** 计价单位组中的任何计价单位为时间定价。

**时间** 计价单位组是在安装 PSA 时创建的。 其默认计价单位为 **小时** 。 不能删除、重命名或编辑 **时间** 计价单位组或 **时间** 计价单位的属性。 但是，可以向 **时间** 计价单位组添加其他计价单位。 如果尝试删除 **时间** 计价单位组或 **小时** 计价单位，可能会导致 PSA 业务逻辑出错。

> ![按角色配置价格](media/basic-guide-13.png)
 
## <a name="transaction-categories-and-expense-categories"></a>交易类别和支出类别

项目顾问产生，并且通常会记帐到客户头上的旅行和其他支出。 PSA 支持使用价目表为支出类别定价。 例如，机票、酒店和租车就属于支出类别。 支出的每项价目表明细指定特定支出类别的定价。 对于支出类别的定价，PSA 支持以下三种定价方法：

- **按成本** - 按支出成本对客户记帐，不加价。
- **加价百分比** - 在实际成本的基础上对客户按加价百分比记帐。 
- **单价** - 为每个支出类别单位设置记帐价格。 对客户记帐的金额根据顾问报告的支出单位数量计算。 英里数使用单价定价方法。 例如，可以将英里数支出类别配置为每天 30 美元 (USD) 或每英里 2 美元。 当顾问为项目报告英里数时，记帐金额基于顾问报告的英里数计算。

> ![配置支出类别的定价](media/basic-guide-14.png)
 
## <a name="project-sales-pricing-and-overrides"></a>项目销售定价和替代

对于项目报价单和合同，项目价目表采用的价格替代模式与产品价目表采用的不同。 在基于产品目录的报价单明细中，可以直接替代报价单明细中角色和类别的价格，因为每项报价单明细都正好指向一个目录项。 但是，在基于项目的报价单明细中，不能直接替代报价单明细中的角色和类别的价格。 为了支持这两种不同的替代模式，PSA 引入了一种新的价目表关联，即项目价目表。

> [!NOTE]
> 建议您为项目资源和目录项设置单独的价目表，因为在您替代定价时，这两者的行为不同。

对于项目定价，下面的每个实体可以有一个或多个关联的销售价目表：

- 客户（帐户） 
- 商机 
- 报价单 
- 项目合同

这些实体与价目表之间的关联通过项目价目表指示。 可以将一个或多个价目表与客户、商机、报价单和项目合同销售实体关联。

不会在客户记录中自动输入默认项目价目表。 但是，可以手动向客户记录附加项目价目表。 尽管如此，还是仅当与客户之间存在自定义定价协议时，才应手动附加项目价目表。 

如果向销售实体附加项目价目表，PSA 将验证以下信息：

- 价目表有 **销售** 上下文。 
- 价目表货币与客户货币匹配。 

在项目合同中，PSA 使用以下优先顺序自动设置相关项目价目表：

1. 报价单
2. 商机
3. 客户 
4. PSA 的全局设置

默认输入项目价目表时，PSA 验证货币是否匹配客户的货币，以及已输入的默认价目表是否有 **销售** 上下文。

可以将多个项目价目表与客户、商机、报价单和项目合同实体关联。 此功能支持为长期开展的项目合同设置特定于日期的默认价格，在此情况下，可能需要多个价目表来纳入通货膨胀导致的价格更新。 但是，如果与客户、商机、报价单或项目合同实体关联的价目表存在重合时效，默认价格可能不正确。 因此，应确保不将具有重合时效的项目价目表与这些实体关联。

### <a name="deal-specific-price-overrides"></a>交易特定的价格替代

在 PSA 中，可为报价单或项目合同中默认输入的项目价目表中所选价格创建交易特定的替代。

默认情况下，项目合同始终会获取基础销售价目表的副本，而不是其直接链接。 此行为可以帮助确保在基础价目表改变时，与客户就工作说明书 (SOW) 达成的价格协议不变。

但是，在报价单中，可以使用基础价目表。 也可以复制基础价目表并进行编辑，以便创建仅适用于该报价单的自定义价目表。 若要创建特定于某个报价单的新价目表，请在 **报价单** 页中选择 **创建自定义报价** 。 只能从报价单访问交易特定的项目价目表。 

创建自定义项目价目表时，只会复制价目表的项目组成部分。 换句话说，创建的新价目表是报价单中附加的现有项目价目表的副本，并且这个新价目表只有相关角色价格和交易类别价格。

> ![查看和配置项目合同的自定义定价](media/basic-guide-15.png)
  
## <a name="tracking-costs"></a>跟踪成本

PSA 可以跟踪在项目中使用人力资源时间产生的成本。 还可以跟踪项目期间产生的其他支出（如旅行支出）的成本。

和记帐费率一样，也使用价目表设置人力资源的成本费率。 下面是成本价目表与销售额价目表行为之间的主要差别：

- 不能替代特定产品、合同或报价单的资源成本费率。 但是，如果进行了特定于交易性质的更改，则可以按交易替代记帐费率。 

- 解析成本价目表时采用以下顺序：

    1. 附加到部门的成本价目表。
    2. 附加到 Project Service 参数的成本价目表。 因为可以将大量不同货币的成本价目表附加到 Project Service 参数，所以 PSA 会在项目、合同或报价单的货币与成本价目表的货币之间进行匹配。
    3. 对于支出，按成本定价方法和成本加价定价方法不适用于成本价目表。 即使在成本价目表明细中使用这些定价方法设置交易类别成本，系统也会忽略这些定价方法，并且不输入任何默认成本费。
