---
title: 协调预订和分派
description: 本主题提供有关实际值的信息。
author: ruhercul
manager: kfend
ms.service: dynamics-365-customerservice
ms.custom:
- dyn365-projectservice
ms.date: 11/27/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.assetid: 614352ba-dbd8-4fa5-8225-d54f9ec0e218
ms.author: ruhercul
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
ms.openlocfilehash: 27fc7b6abb4c9a7a761059a2f392f13bc0dd14f9
ms.sourcegitcommit: 8c786230ef2a497280885b827162561776e2eb00
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/24/2020
ms.locfileid: "3749786"
---
# <a name="reconcile-bookings-and-assignments"></a>协调预订和分派

[!INCLUDE[cc-applies-to-psa-app-3.x](../includes/cc-applies-to-psa-app-3x.md)]

项目团队成员的项目预订与项目任务分派之间关系松散。 因此，一个资源可以有不与预订对应的任务分派和不与任务分派对应的预订。 理想情况下，项目预订和分派一致，这样资源就可以落实产能以执行其任务分派。 但是，现实却是预订可能基于可用性，而任务计时可能随着项目经历其生命周期而改变。 因此，松散耦合为灵活性留出了余地。

由于项目预订与任务分派松散耦合，项目实体中有一个**协调**选项卡。 此选项卡可帮助项目经理协调其项目团队的团队成员预订及其分派。

对于每位指定团队成员，**协调**选项卡显示深入到单个任务分派的预订和分派。 它通过单元格显示可表示时间段（从数月到数天）的工时。

在**时间刻度**字段中，可以选择**月**、**周**或**天**。 默认情况下选中**周**。 但是，可以通过选择**设置**按钮更改默认值。 打开**协调**选项卡后，将显示当前日期，但是可以使用日历控件在时间中前进或后退。 如果项目的开始日期在将来，此选项卡将在项目打开时显示该日期。 日历控件中还有用于移到项目开始日期和结束日期的选项。

可使用每个资源的展开器控件显示资源的预订详细信息。 也可以将每项资源的分派展开至单个任务级别。

**协调**选项卡底部显示项目的整体净总额，而此选项卡中还包含一个总计列。 对于每个资源，此选项卡采用团队成员的项目预订与该团队成员任务分派汇总之差。 理想情况下，差应该为 0（零）。 换句话说，资源的预订与其任务分派之间应该无差额。 将使用颜色和阴影来指示所有差额以指示两种情况：

- **预订不足** – 资源的分派比预订的多时，会发生预订不足。 因为尚未保留此产能，所以项目经理可以解决这个问题，方法是扩展资源的预订以弥补不足。
- **超出预订** – 当已经将某个资源预订给项目，但是尚未将其分派给任务时，发生超出预订。 可能可以接受这种情况，例如，资源在任务分派前预订。 但是，如果是其他情况，可能不会计划分派资源。 在这些情况下，项目经理应该考虑取消资源的预订，以便将产能用于其他项目。

> [!NOTE]
> 可能会隐藏这些情况的图例，以便为网格留出更多空间。 在此情况下，可以使用**设置**按钮显示此图例。

在某些情况下，当**时间刻度**字段设置为比**天**更高的级别，计算出的差额可能为 0（零）。 例如，在**月**级别，某个资源的净差额可能为 0（零），说明预订等于分派。 但是，如果查看**周**级别，可能会发现当月第一周的分派为 0（零）小时，预订为 40 小时，但是当月第二周的分派为 40 小时，预订为 0（零）小时。 尽管当月的总预订和分派相等，但按周时则不相等。

查看更高级别时，**协调**选项卡显示一个单元格指示器，用于通知您较低时间级别存在差额。 例如，在下图中，名称为龚莲的资源的 2018 年 10 月的单元格中显示了一个单元格指示器。 因此您可以看到，即使该资源的预订和分派在**月**级别聚合时相等，在更低级别则不匹配。

![不匹配的预订和分派](media/reconcile-assignments-01.JPG)

双击单元格放大到下一个更低级别并查看差额。 例如，如果双击龚莲的 2018 年 10 月差额，将向下钻取到**周**级别。 然后可以看到 10 月前两周该资源的预订为 16 个工时，但是没有任何分派，10 月第三周有 16 个工时的分派，但是没有任何预订。

![不匹配的预订和分派](media/reconcile-assignments-02.JPG)

可以右键单击单元格缩小到下一个更高级别。 也可以通过选择**设置**按钮关闭单元格指示器。 

还可以使用网格上方的**上一个**和**下一个**按钮在项目中的任何差额之间切换。 若要使用这些按钮，必须先选择资源。 选择**下一个**将转到该资源的预订与分派之间的下一个差额。 选择**上一个**则转到上一个差额。

如果资源有任务分派，但是没有预订，可以选择预订不足，然后选择**扩展预订**。 然后可以查看需要来解决资源不足的预订。 也可以查看该资源在当前项目和其他项目中的预订。 选择**确定** 为资源创建预订，并且不考虑当前可用性。 然后，项目经理或资源经理可使用日程安排板管理资源的预订已扩展，所以其超额预订已超过产能的情况。

## <a name="managing-with-time-zones"></a>使用时区管理
若要在使用扩展预订时确保获得准确且可预测的结果，必须满足以下两个主要先决条件：  

- 用户必须配置其设备时区，以与您的“系统个性化设置”中定义的时区匹配。
 
  ![Windows 10 中的时区设置](media/reconcile-assignments-03.png)

  ![个性化设置中的时区设置](media/reconcile-assignments-04.png)
 
- 可预订资源必须至少有一分钟的工作时间与用于定义所请求扩展的分布重叠。 例如，以下示例显示了工作时间介于上午 9:00 和下午 7:00 之间的审阅资源。 

  ![资源分布比较](media/reconcile-assignments-05.png)

下表显示了：

- 项目日历模板。
- 资源 A：该资源具有相同的日历，并与项目位于同一时区中。 预订的开始时间将为上午 9:00。
- 资源 B：此资源与项目位于不同的时区中，因此开始时间为其时区中的上午 7:00。 但是，预订将在上午 9:00 开始，因为这是工作分布的最早开始时间。
- 资源 C 和 D：资源也位于不同的时区中，两个相互不同并且与项目也不同，且其预订开始时间不早于各自的可用开始时间。

|实体  |日历  |
|-|-|
|项目日历模板   | ![项目日历](media/reconcile-assignments-06.png) |
|资源 A  | ![资源 A 日历](media/reconcile-assignments-06.png) |
|资源 B  |  ![资源 B 日历](media/reconcile-assignments-07.png) |
|资源 C  |  ![资源 C 日历](media/reconcile-assignments-08.png) |
|资源 D  | ![资源 D 日历](media/reconcile-assignments-09.png)  |
 
当您导航到协调视图时，将显示资源分配和关联的预订不足。
 ![扩展前的协调视图](media/reconcile-assignments-10.png)

对每个资源执行完扩展预订功能之后，每个资源的预订都将被成功扩展。 这是因为每个资源的工作时间都与不足的分布重叠。
 ![预订扩展后的协调视图](media/reconcile-assignments-11.png) 

但是，仔细查看预订的详细信息会发现预订开始时间有所不同。 预订的开始时间将不早于工作分布的开始时间，也不会早于资源的可用开始时间。
 ![日程安排板中的新资源预订](media/reconcile-assignments-12.png)
