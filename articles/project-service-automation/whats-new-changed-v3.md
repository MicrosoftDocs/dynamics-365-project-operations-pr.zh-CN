---
title: Project Service Automation 版本 3 中的新增功能或更改
description: 本主题介绍 Project Service Automation 版本 3 中的新增功能和更改。
manager: kfend
ms.service: business-applications
ms.custom:
- dyn365-projectservice
ms.date: 11/28/2018
ms.topic: article
ms.prod: ''
ms.technology: Dynamics 365 Project Service Automation 3.x
author: JohnPBurrows
ms.assetid: 8a4f3c98-063a-4db8-8645-06b0fbe1b5db
ms.author: john.burrows
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
ms.openlocfilehash: ad0ef8cdac2990716baff27f86a5473bc0b031fe
ms.sourcegitcommit: 8c786230ef2a497280885b827162561776e2eb00
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/24/2020
ms.locfileid: "3749707"
---
# <a name="whats-new-or-changed-in-project-service-automation-version-3"></a><span data-ttu-id="37f09-103">Project Service Automation 版本 3 中的新增功能或更改</span><span class="sxs-lookup"><span data-stu-id="37f09-103">What's new or changed in Project Service Automation version 3</span></span>
[!INCLUDE[cc-applies-to-psa-app-1x-2x](../includes/cc-applies-to-psa-app-1x-2x.md)]

<span data-ttu-id="37f09-104">本主题介绍 Project Service Automation 版本 2 或版本 1 与 3 之间用户界面 (UI)、功能和术语的变化。</span><span class="sxs-lookup"><span data-stu-id="37f09-104">This topic provides information about the changes to user interface (UI), functionality, and terminology in Project Service Automation between version 2 or version 1 and version 3.</span></span>

## <a name="project-scheduling"></a><span data-ttu-id="37f09-105">项目计划编制</span><span class="sxs-lookup"><span data-stu-id="37f09-105">Project scheduling</span></span>
<span data-ttu-id="37f09-106">项目计划在早期版本中称为工作分解结构 (WBS)，已经重命名为“计划”，可以通过单击**计划**选项卡访问。</span><span class="sxs-lookup"><span data-stu-id="37f09-106">The project schedule, which was known as the Work Breakdown Structure (WBS) in previous versions, has been renamed Schedule and is accessed by clicking the **Schedule** tab.</span></span> 

![项目计划](media/psa-schedule-01.png)

<span data-ttu-id="37f09-108">计划现在为交互采用了新的界面，该界面既现代，又容易访问。</span><span class="sxs-lookup"><span data-stu-id="37f09-108">The schedule now has a new surface for interaction that is both modern and accessible.</span></span> <span data-ttu-id="37f09-109">但是基础 Project Service Automation 计划引擎未变。</span><span class="sxs-lookup"><span data-stu-id="37f09-109">However, the underlying Project Service Automation scheduling engine has not changed.</span></span> <span data-ttu-id="37f09-110">和 Project Service Automation 的上一个版本一样，可使用计划网格功能区中的控件按钮与计划交互。</span><span class="sxs-lookup"><span data-stu-id="37f09-110">The control buttons in the schedule grid’s ribbon allow you to interact with the schedule similar to the previous version of Project Service Automation.</span></span> <span data-ttu-id="37f09-111">计划的其他更改包括：</span><span class="sxs-lookup"><span data-stu-id="37f09-111">Additional changes to the schedule include:</span></span>

- <span data-ttu-id="37f09-112">**甘特图** - 不再提供甘特图。</span><span class="sxs-lookup"><span data-stu-id="37f09-112">**Gantt chart** - The Gantt chart is no longer present.</span></span> <span data-ttu-id="37f09-113">在以后的更新中，新甘特图可视化对象将回归。</span><span class="sxs-lookup"><span data-stu-id="37f09-113">A new Gannt visualization will be returning in a future update.</span></span>
- <span data-ttu-id="37f09-114">**列标题** - 可通过单击列标题旁边的向下指示器在网格中隐藏列标题。</span><span class="sxs-lookup"><span data-stu-id="37f09-114">**Column headers** - You can hide column headers in the grid by clicking the down indicator next to the column title.</span></span> 
- <span data-ttu-id="37f09-115">**列** - 可通过单击**添加列**显示隐藏的列。</span><span class="sxs-lookup"><span data-stu-id="37f09-115">**Columns** - You can show hidden columns by clicking **Add column**.</span></span> 
- <span data-ttu-id="37f09-116">**交易类别** - 已在计划网格中增加了**交易类别**查找，并默认显示。</span><span class="sxs-lookup"><span data-stu-id="37f09-116">**Transaction category** - A **Transaction category** lookup has been added to the schedule grid and is shown by default.</span></span> 
 
## <a name="project-templates"></a><span data-ttu-id="37f09-117">项目模板</span><span class="sxs-lookup"><span data-stu-id="37f09-117">Project templates</span></span>
<span data-ttu-id="37f09-118">已对项目模板功能进行了以下更改。</span><span class="sxs-lookup"><span data-stu-id="37f09-118">The following changes have been made to project template functionality.</span></span>

### <a name="create-a-project-template"></a><span data-ttu-id="37f09-119">创建项目模板</span><span class="sxs-lookup"><span data-stu-id="37f09-119">Create a project template</span></span> 
<span data-ttu-id="37f09-120">和 Project Service Automation 早期版本一样，可以在版本 3 中创建项目模板。</span><span class="sxs-lookup"><span data-stu-id="37f09-120">You can create a project template in version 3 similar to previous versions of Project Service Automation.</span></span> <span data-ttu-id="37f09-121">模板中只能包含一个计划，而该计划中可以包含分派，但不是必须包含。</span><span class="sxs-lookup"><span data-stu-id="37f09-121">The template can contain only a schedule and the schedule can include assignments, but they are not required.</span></span> <span data-ttu-id="37f09-122">如果计划中没有分派，说明分派仅适用于通用资源。</span><span class="sxs-lookup"><span data-stu-id="37f09-122">If the schedule does have assignments, they can only be for generic resources.</span></span> <span data-ttu-id="37f09-123">可以为通用资源生成资源要求，但是不能在模板中为这些要求预订实际资源。</span><span class="sxs-lookup"><span data-stu-id="37f09-123">You can generate resource requirements for generic resources, but they can't be booked with real resources in the template.</span></span> <span data-ttu-id="37f09-124">不能在模板中为团队预订实际资源。</span><span class="sxs-lookup"><span data-stu-id="37f09-124">You can't book a real resource to a team in a template.</span></span> 

### <a name="create-a-template-from-an-existing-template"></a><span data-ttu-id="37f09-125">根据现有模板创建模板</span><span class="sxs-lookup"><span data-stu-id="37f09-125">Create a template from an existing template</span></span>
<span data-ttu-id="37f09-126">在 Project Service Automation 版本 3 中根据现有模板创建新项目模板时，将出现以下情况：</span><span class="sxs-lookup"><span data-stu-id="37f09-126">When you create a new project template from an existing template in Project Service Automation version 3, the following happens:</span></span> 

- <span data-ttu-id="37f09-127">源项目的计划复制到模板中。</span><span class="sxs-lookup"><span data-stu-id="37f09-127">The source project’s schedule is copied into the template.</span></span> 
- <span data-ttu-id="37f09-128">通用资源复制到团队中，并覆盖所有通用资源分派。</span><span class="sxs-lookup"><span data-stu-id="37f09-128">Generic resources are copied into the team and any generic resource assignments are copied over.</span></span> <span data-ttu-id="37f09-129">不覆盖通用资源的要求。</span><span class="sxs-lookup"><span data-stu-id="37f09-129">Requirements for the generic resources are not copied over.</span></span> 

### <a name="create-a-template-from-an-existing-project"></a><span data-ttu-id="37f09-130">根据现有项目创建模板</span><span class="sxs-lookup"><span data-stu-id="37f09-130">Create a template from an existing project</span></span>
<span data-ttu-id="37f09-131">根据需要项目创建新项目模板时，将出现以下情况：</span><span class="sxs-lookup"><span data-stu-id="37f09-131">When you create a new project template from an existing project, the following happens:</span></span> 

- <span data-ttu-id="37f09-132">源项目的计划复制到模板中。</span><span class="sxs-lookup"><span data-stu-id="37f09-132">The source project’s schedule is copied into the template.</span></span> 
- <span data-ttu-id="37f09-133">通用资源复制到团队中，并保留所有通用资源分派。</span><span class="sxs-lookup"><span data-stu-id="37f09-133">Generic resources are copied into the team and any generic resource assignments are preserved.</span></span> <span data-ttu-id="37f09-134">不覆盖通用资源的要求。</span><span class="sxs-lookup"><span data-stu-id="37f09-134">Requirements for the generic resources are not copied over.</span></span>    
- <span data-ttu-id="37f09-135">从团队中删除指定资源（已分派资源和未分派资源），并替换为通用资源。</span><span class="sxs-lookup"><span data-stu-id="37f09-135">Named resources, both assigned or unassigned are removed from the team and replaced with generic resources.</span></span>
- <span data-ttu-id="37f09-136">删除客户信息（如果有）。</span><span class="sxs-lookup"><span data-stu-id="37f09-136">If present, customer information is removed.</span></span> 
- <span data-ttu-id="37f09-137">删除对报价单和合同的引用（如果有）。</span><span class="sxs-lookup"><span data-stu-id="37f09-137">If present, references to quotes and contracts are removed.</span></span> 

### <a name="create-a-project-from-a-template"></a><span data-ttu-id="37f09-138">从模板创建项目</span><span class="sxs-lookup"><span data-stu-id="37f09-138">Create a project from a template</span></span>
<span data-ttu-id="37f09-139">在 Project Service Automation 版本 3 中根据模板创建新项目时，将出现以下情况：</span><span class="sxs-lookup"><span data-stu-id="37f09-139">In Project Service Automation version 3, when you create a new project from a template, the following happens:</span></span>

- <span data-ttu-id="37f09-140">计划、团队和分派复制到新项目。</span><span class="sxs-lookup"><span data-stu-id="37f09-140">The schedule, team, and assignments are copied to the new project.</span></span>   
- <span data-ttu-id="37f09-141">开始日期为复制日期或用户选择的日期。</span><span class="sxs-lookup"><span data-stu-id="37f09-141">The start date is either the copy date or date selected by the user.</span></span>   
- <span data-ttu-id="37f09-142">对于模板中具有资源要求的所有通用团队成员，不自动复制或生成要求。</span><span class="sxs-lookup"><span data-stu-id="37f09-142">For any generic team members with resource requirements in the template, the requirements are not copied or generated automatically.</span></span> <span data-ttu-id="37f09-143">需要由您生成。</span><span class="sxs-lookup"><span data-stu-id="37f09-143">You will need to generate them.</span></span> 

## <a name="copy-a-project"></a><span data-ttu-id="37f09-144">复制项目</span><span class="sxs-lookup"><span data-stu-id="37f09-144">Copy a project</span></span>
<span data-ttu-id="37f09-145">在 Project Service Automation 版本 3 中复制项目时，将出现以下情况：</span><span class="sxs-lookup"><span data-stu-id="37f09-145">In Project Service Automation version 3, when you copy a project, the following happens:</span></span> 

- <span data-ttu-id="37f09-146">复制，但可以更改估算开始日期。</span><span class="sxs-lookup"><span data-stu-id="37f09-146">The estimated start date is copied, but can be changed.</span></span>  
- <span data-ttu-id="37f09-147">复制项目计划和任务。</span><span class="sxs-lookup"><span data-stu-id="37f09-147">The project schedule and tasks are copied.</span></span> 
- <span data-ttu-id="37f09-148">复制通用资源及其分派。</span><span class="sxs-lookup"><span data-stu-id="37f09-148">Generic resources and their assignments are copied.</span></span> <span data-ttu-id="37f09-149">不复制通用资源的资源要求。</span><span class="sxs-lookup"><span data-stu-id="37f09-149">Resource requirements for the generic resources are not copied.</span></span> <span data-ttu-id="37f09-150">需要由您重新生成。</span><span class="sxs-lookup"><span data-stu-id="37f09-150">You will need to re-generate them.</span></span> 
- <span data-ttu-id="37f09-151">不复制实际资源及其分派。</span><span class="sxs-lookup"><span data-stu-id="37f09-151">Real resources and their assignments are not copied.</span></span> <span data-ttu-id="37f09-152">而是将其替换为通用资源。</span><span class="sxs-lookup"><span data-stu-id="37f09-152">Instead, they are replaced by generic resources.</span></span> 
- <span data-ttu-id="37f09-153">不将实际值复制到新项目。</span><span class="sxs-lookup"><span data-stu-id="37f09-153">Actuals are not copied to the new project.</span></span> 

## <a name="move-a-scheduled-project"></a><span data-ttu-id="37f09-154">移动计划的项目</span><span class="sxs-lookup"><span data-stu-id="37f09-154">Move a scheduled project</span></span>
<span data-ttu-id="37f09-155">向前移动现有项目的计划时，将出现以下情况：</span><span class="sxs-lookup"><span data-stu-id="37f09-155">When you move the schedule of existing project forward, the following happens:</span></span> 

- <span data-ttu-id="37f09-156">自动移动任务日期以便与移动期间对应。</span><span class="sxs-lookup"><span data-stu-id="37f09-156">Task dates are automatically moved to correspond with the movement period.</span></span> 
- <span data-ttu-id="37f09-157">已分派通用资源保持分派状态。</span><span class="sxs-lookup"><span data-stu-id="37f09-157">Assigned generic resources remain assigned.</span></span>   
- <span data-ttu-id="37f09-158">如果是在移动项目之前生成的，则通用资源的要求不变，不会自动重新生成。</span><span class="sxs-lookup"><span data-stu-id="37f09-158">If they are generated before the project is moved, requirements for the generic resource remain the same and are not automatically re-generated.</span></span> <span data-ttu-id="37f09-159">您需要再次生成，以体现任务移动造成的新分派。</span><span class="sxs-lookup"><span data-stu-id="37f09-159">You will need to generate them again to reflect the new assignments due to the task movement.</span></span> 
- <span data-ttu-id="37f09-160">对实际资源的分派将更改，以便与任务日期移动对应。</span><span class="sxs-lookup"><span data-stu-id="37f09-160">Assignments on real resources change to correspond with the task date movement.</span></span> <span data-ttu-id="37f09-161">对实际资源的订阅不变。</span><span class="sxs-lookup"><span data-stu-id="37f09-161">Bookings on real resources do not change.</span></span> <span data-ttu-id="37f09-162">您需要使用协调视图修改预订。</span><span class="sxs-lookup"><span data-stu-id="37f09-162">You will need to modify the bookings using the reconciliation view.</span></span> 
- <span data-ttu-id="37f09-163">具有预订，但是不具有分派的团队资源不变。</span><span class="sxs-lookup"><span data-stu-id="37f09-163">Team resources with bookings but no assignments do not change.</span></span> 
- <span data-ttu-id="37f09-164">实际值不移动。</span><span class="sxs-lookup"><span data-stu-id="37f09-164">Actuals do not move.</span></span> 

## <a name="estimates"></a><span data-ttu-id="37f09-165">估算</span><span class="sxs-lookup"><span data-stu-id="37f09-165">Estimates</span></span>
<span data-ttu-id="37f09-166">估算已拆分为两个选项卡：**资源分派**和**估算**。</span><span class="sxs-lookup"><span data-stu-id="37f09-166">Estimates have been split into two tabs, **Resource assignment** and **Estimates**.</span></span> <span data-ttu-id="37f09-167">**资源分派**选项卡中包含工作量估算，并通过分时段视图显示任务的资源分派。</span><span class="sxs-lookup"><span data-stu-id="37f09-167">The **Resource assignment** tab contains the effort estimates and shows the resource assignments for the tasks in a time-phased view.</span></span> <span data-ttu-id="37f09-168">可根据计划引擎生成的结果编辑估算。</span><span class="sxs-lookup"><span data-stu-id="37f09-168">You can edit the estimates based on what the scheduling engine has generated.</span></span>

![“资源分派”选项卡显示任务的工作量估算和资源分派](media/resource-assignments-tab-02.png)

<span data-ttu-id="37f09-170">**估算**选项卡显示资源分派的成本和销售额。</span><span class="sxs-lookup"><span data-stu-id="37f09-170">The **Estimates** tab shows the cost and sales amounts for resource assignments.</span></span> <span data-ttu-id="37f09-171">这些金额为只读。</span><span class="sxs-lookup"><span data-stu-id="37f09-171">The amounts are read-only.</span></span> <span data-ttu-id="37f09-172">定成本和销售定价现在通过计划中的团队成员分派驱动。</span><span class="sxs-lookup"><span data-stu-id="37f09-172">The costing and sales pricing are now driven from the team member assignments on the schedule.</span></span> <span data-ttu-id="37f09-173">这表示如果任务没有分派，将在未分派桶下显示。</span><span class="sxs-lookup"><span data-stu-id="37f09-173">This means that if you have a task without any assignment, the task will show under the unassigned bucket.</span></span> <span data-ttu-id="37f09-174">还表示如果没有**角色**（这是默认定价维度），如果您为项目关联客户或合同/报价单，则不存在估算成本或销售额。</span><span class="sxs-lookup"><span data-stu-id="37f09-174">This also means that without **role**, which is a default pricing dimension, there will be no estimated cost or sales if you have a customer or contract/quote associated with the project.</span></span> 

![“估算”选项卡显示成本和销售额](media/estimates-tab-03.png)
  
<span data-ttu-id="37f09-176">在计划视图中，任务还支持类别。</span><span class="sxs-lookup"><span data-stu-id="37f09-176">Category is also supported on tasks in the schedule view.</span></span> <span data-ttu-id="37f09-177">如果在估算的分时段视图中按类别分组，则体验更好，特别是当您的项目中还有支出估算时。</span><span class="sxs-lookup"><span data-stu-id="37f09-177">Grouping by category on the time-phased view of estimates will provide a better experience, especially when you also have expense estimates in your project.</span></span> <span data-ttu-id="37f09-178">支出估算使用单独选项卡中的网格输入。</span><span class="sxs-lookup"><span data-stu-id="37f09-178">Expense estimates are entered using a grid on a separate tab.</span></span> 

<span data-ttu-id="37f09-179">可以在**支出估算**选项卡上的网格中输入支出估算。</span><span class="sxs-lookup"><span data-stu-id="37f09-179">Expense estimates can be entered in the grid on the **Expense estimates** tab.</span></span> 

![“支出估算”选项卡显示支出估算网格](media/expense-estimates-tab-04.png)

## <a name="resource-management"></a><span data-ttu-id="37f09-181">资源管理</span><span class="sxs-lookup"><span data-stu-id="37f09-181">Resource management</span></span>
<span data-ttu-id="37f09-182">在 Project Service Automation 版本 3 中，由于采用了新的统一客户端 UI，并且对预订与分派之间的关系进行了更改，所以使用通用资源或实际资源为项目安排人员的方法与版本 2 和版本 1 差别很大。</span><span class="sxs-lookup"><span data-stu-id="37f09-182">In Project Service Automation version 3, with the new Unified Client UI and changes in the relationship between bookings and assignments, staffing a project with generic or real resources has changed dramatically from version 2 and version 1.</span></span> <span data-ttu-id="37f09-183">但是可预订资源（**实际**资源和**通用**资源）的概念未变，团队成员、要求、分派和预订的概念也未变。</span><span class="sxs-lookup"><span data-stu-id="37f09-183">However, the concepts of bookable resources, both **real** and **generic** remain the same, as do team members, requirements, assignments, and bookings.</span></span>   

![使用资源选取器](media/resource-management-05.png)

### <a name="assign-a-real-bookable-resource"></a><span data-ttu-id="37f09-185">分派实际可预订资源</span><span class="sxs-lookup"><span data-stu-id="37f09-185">Assign a real bookable resource</span></span> 
<span data-ttu-id="37f09-186">在 Project Service Automation 版本 3 中，预订与任务分派之间的联系不如在 Project Service Automation 早期版本中紧密。</span><span class="sxs-lookup"><span data-stu-id="37f09-186">In Project Service Automation version 3, bookings and task assignments are not as tightly intertwined as in previous versions of Project Service Automation.</span></span> <span data-ttu-id="37f09-187">可以使用团队网格预订**实际**团队成员，就像在市场内一样。</span><span class="sxs-lookup"><span data-stu-id="37f09-187">You can use the team grid to book a **real** team member, similar to in-market.</span></span>

<span data-ttu-id="37f09-188">可使用计划中的资源选取器选择在团队视图中创建的团队成员，然后将其分派给任务。</span><span class="sxs-lookup"><span data-stu-id="37f09-188">Using the resource picker on the schedule, you can select the team member created in the team view and then assign them to tasks.</span></span> <span data-ttu-id="37f09-189">可以继续为其分派任务，即使已经通过了预订。</span><span class="sxs-lookup"><span data-stu-id="37f09-189">You can continue to assign tasks to them, even past their bookings.</span></span> <span data-ttu-id="37f09-190">可使用**协调**选项卡协调在预订和分派中存在差异的团队成员。</span><span class="sxs-lookup"><span data-stu-id="37f09-190">Use the **Reconciliation** tab to reconcile team members that have differences in bookings and assignments.</span></span>

<span data-ttu-id="37f09-191">资源选取器将显示项目的团队成员。</span><span class="sxs-lookup"><span data-stu-id="37f09-191">The resource picker will show the team members for the project.</span></span> <span data-ttu-id="37f09-192">也可以使用资源选取器搜索和查看不属于项目团队的其他可预订资源。</span><span class="sxs-lookup"><span data-stu-id="37f09-192">You can also use the resource picker to search for and view other bookable resources that are not part of the project team.</span></span> <span data-ttu-id="37f09-193">可以将其分派给任务，这样它们就成为了项目团队的一部分。</span><span class="sxs-lookup"><span data-stu-id="37f09-193">You can assign them to a task and they will become part of the project team.</span></span> <span data-ttu-id="37f09-194">您需要使用**日程安排板**或**协调**选项卡协调它们。</span><span class="sxs-lookup"><span data-stu-id="37f09-194">You will need to book them using the **Schedule board** or **Reconciliation** tab.</span></span>

### <a name="assign-a-generic-bookable-resource-on-a-task-and-project-team-and-then-fulfill-with-a-real-resource-via-schedule-board"></a><span data-ttu-id="37f09-195">通过日程安排板为任务分派通用可预订资源和使用实际资源完成任务</span><span class="sxs-lookup"><span data-stu-id="37f09-195">Assign a generic bookable resource on a task and project team and then fulfill with a real resource via Schedule Board</span></span> 
<span data-ttu-id="37f09-196">在 Project Service Automation 版本 3 中，生成团队功能不适用于通用资源。</span><span class="sxs-lookup"><span data-stu-id="37f09-196">In Project Service Automation version 3, the generate team functionality is not used for generic resources.</span></span> <span data-ttu-id="37f09-197">您可以改为通过在计划的资源单元格中键入通用资源的位置名称，从计划创建并直接分派通用资源。</span><span class="sxs-lookup"><span data-stu-id="37f09-197">Instead, you can create and directly assign a generic resource from the schedule by typing the position name of the generic resource in the resource cell of the schedule.</span></span> <span data-ttu-id="37f09-198">也可以在单元格中选择资源图标，然后使用资源选取器键入要创建的通用资源的名称。</span><span class="sxs-lookup"><span data-stu-id="37f09-198">Or, you can select the resource icon in the cell and then, using the resource picker, type the name of the generic resource you want to create.</span></span> <span data-ttu-id="37f09-199">这样将打开快速创建面板，供您设置通用资源团队成员的角色和部门。</span><span class="sxs-lookup"><span data-stu-id="37f09-199">This will open a quick create panel that allows you to set the role and organization unit of the generic resource team member.</span></span> <span data-ttu-id="37f09-200">创建资源后，将把该资源分派给任务，而您可以继续把该通用资源分派给计划中的其他任务。</span><span class="sxs-lookup"><span data-stu-id="37f09-200">After you create the resource, it is assigned to the task and you can continue to assign that generic resource to other tasks in the schedule.</span></span>    
 
<span data-ttu-id="37f09-201">将资源分派给所有适当任务之后，可以生成资源要求，然后通过使用**日程安排板**直接预订或通过提交资源请求来满足要求。</span><span class="sxs-lookup"><span data-stu-id="37f09-201">When you have assigned the resource to all of the appropriate tasks, you can generate a resource requirement and then fulfill it by directly booking with the **Schedule board** or by submitting a resource request.</span></span> <span data-ttu-id="37f09-202">也可以直接向团队成员网格添加通用资源。</span><span class="sxs-lookup"><span data-stu-id="37f09-202">You can also add generic resources directly to the team member grid.</span></span> 

<span data-ttu-id="37f09-203">将把通用资源添加到项目团队，但不带资源要求，不过具有项目开始/结束日期，直到生成资源要求。</span><span class="sxs-lookup"><span data-stu-id="37f09-203">Generic resources are added to the project team with no resource requirements and with the start/end dates of the project until the resource requirement is generated.</span></span> <span data-ttu-id="37f09-204">若要生成要求，请选择通用资源，然后单击**生成**。</span><span class="sxs-lookup"><span data-stu-id="37f09-204">To generate a requirement, select the generic resource and click **Generate**.</span></span> <span data-ttu-id="37f09-205">现在将显示要求链接，并使用分派的工时填充所需工时。</span><span class="sxs-lookup"><span data-stu-id="37f09-205">The requirement link now displays and the required hours will be populated with the assigned hours.</span></span> <span data-ttu-id="37f09-206">可单击此链接打开和更新要求。</span><span class="sxs-lookup"><span data-stu-id="37f09-206">You can click the link to open and update the requirement.</span></span>
  
<span data-ttu-id="37f09-207">当预订完成并由指定资源完全履行时，将把通用资源替换为该指定资源，并使用该指定资源更新计划中的分派。</span><span class="sxs-lookup"><span data-stu-id="37f09-207">When the booking is complete and totally fulfilled by a named resource, the generic resource is replaced with the named resource and the assignment on the schedule is updated with the named resource.</span></span> 

<span data-ttu-id="37f09-208">要求的建议资源现在存储在选项卡中，而不是存储在单独的部分中。</span><span class="sxs-lookup"><span data-stu-id="37f09-208">Proposed resources for requirements are now stored on a tab instead of a separate section.</span></span>

### <a name="multiple-named-resources-fulfilling-a-generic-resource"></a><span data-ttu-id="37f09-209">多个指定资源替代一个通用资源</span><span class="sxs-lookup"><span data-stu-id="37f09-209">Multiple named resources fulfilling a generic resource</span></span>
<span data-ttu-id="37f09-210">当使用多个资源满足一项要求时，通用资源仍然留在团队中，并继续分派给任务。</span><span class="sxs-lookup"><span data-stu-id="37f09-210">When a requirement is fulfilled with multiple resources, the generic resource remains on the team and assigned to the task.</span></span> <span data-ttu-id="37f09-211">位置中不会分派已预订的指定团队成员。</span><span class="sxs-lookup"><span data-stu-id="37f09-211">The named team members who are booked are not assigned as part of the position.</span></span> <span data-ttu-id="37f09-212">项目经理可以根据需要将工作分派给实际资源。</span><span class="sxs-lookup"><span data-stu-id="37f09-212">The project manager can assign the work as needed to the real resources.</span></span>  <span data-ttu-id="37f09-213">**协调**视图提供多个资源到多个任务分派的预订分解。</span><span class="sxs-lookup"><span data-stu-id="37f09-213">The **Reconciliation** view provides a breakdown of the bookings across multiple resources to multiple task assignments.</span></span> <span data-ttu-id="37f09-214">不会自动执行此操作，因为在复杂的方案中（如您有大量任务构成要求），需要假设项目经理的分派方法意图。</span><span class="sxs-lookup"><span data-stu-id="37f09-214">This is not done automatically because in more complicated scenarios, such as one where you have a bundle of tasks making up the requirement, the intent of how the project manager wants to assign, needs to be assumed.</span></span> <span data-ttu-id="37f09-215">因为系统无法理解意图，所以假设可能与意图不同，并且可能会出现错误结果或不可预料的结果。</span><span class="sxs-lookup"><span data-stu-id="37f09-215">Because the system can't understand intent, the assumptions will likely be different than intended and an incorrect or unpredictable result will occur.</span></span> <span data-ttu-id="37f09-216">可预测结果是项目经理特意使用**协调**视图分派资源之前，一直使用分派的通用资源。</span><span class="sxs-lookup"><span data-stu-id="37f09-216">The predictable outcome is that the generic resource remains assigned until the project manager deliberately assigns resources using the **Reconciliation** view.</span></span>

### <a name="reconciliation"></a><span data-ttu-id="37f09-217">协调</span><span class="sxs-lookup"><span data-stu-id="37f09-217">Reconciliation</span></span>
<span data-ttu-id="37f09-218">**协调**选项卡显示每个项目团队成员的预订和所有分派。</span><span class="sxs-lookup"><span data-stu-id="37f09-218">The **Reconciliation** tab shows bookings and all assignments for each project team member.</span></span> <span data-ttu-id="37f09-219">此视图通过单元格显示可表示时间点（从数月到数天）的工时。</span><span class="sxs-lookup"><span data-stu-id="37f09-219">The view shows hours in cells which can represent time points from months to days.</span></span> <span data-ttu-id="37f09-220">项目经理可通过此视图协调其项目团队的团队成员预订及其分派。</span><span class="sxs-lookup"><span data-stu-id="37f09-220">This view allows project managers to reconcile team member bookings and their assignments for their project team.</span></span> <span data-ttu-id="37f09-221">这非常有用，因为预订之间的关系不紧密，所以规划项目时更灵活。</span><span class="sxs-lookup"><span data-stu-id="37f09-221">This is helpful because bookings and task assignments are not tightly coupled, which allows for more flexibility when planning a project.</span></span> 

![协调选项卡显示项目团队成员的预订和分派](media/resource-reconciliation-tab-06.png)

<span data-ttu-id="37f09-223">对于每个资源，视图显示团队成员的预订与其任务分派汇总之间的区别，并显示项目中的预订和分派之间可能出现的两项差别：</span><span class="sxs-lookup"><span data-stu-id="37f09-223">For each resource, the view takes the difference between a team member's bookings and a rollup of their task assignments and shows the following two differences that can occur with bookings and assignments in a project:</span></span> 

- <span data-ttu-id="37f09-224">**预订不足** - 资源的分派比预订的多时，会发生预订不足。</span><span class="sxs-lookup"><span data-stu-id="37f09-224">**Booking shortage** - Booking shortages occur when a resource has more assignments than bookings.</span></span> <span data-ttu-id="37f09-225">因为尚未保留此产能，所以项目经理可以解决这个问题，方法是扩展资源的预订以弥补不足额。</span><span class="sxs-lookup"><span data-stu-id="37f09-225">Because this capacity has not been reserved, a project manager can correct this by extending the resource’s bookings to cover the deficit.</span></span> 
- <span data-ttu-id="37f09-226">**超出预订** - 当已经将某个资源预订给项目，但是尚未将其分派给任务时，发生超出预订。</span><span class="sxs-lookup"><span data-stu-id="37f09-226">**Excess bookings** - Excessive booking occurs when a resource has been booked to the project but has not been assigned to tasks.</span></span>  <span data-ttu-id="37f09-227">可能可以接受这种现象，例如，资源在任务分派前预订。</span><span class="sxs-lookup"><span data-stu-id="37f09-227">This may be an acceptable occurrence, for example if the resource has been booked prior to task assignment.</span></span> <span data-ttu-id="37f09-228">但是在其他情况下，可能未计划分派资源，并且 PM 应该考虑取消资源的预订以留出产能用于其他项目。</span><span class="sxs-lookup"><span data-stu-id="37f09-228">However in other cases, the resource may not be planned to be assigned, and the PM should consider canceling the resource’s bookings to allow the capacity to be used for another project.</span></span> 

<span data-ttu-id="37f09-229">如果资源有任务分派，但是无预订（预订不足），可以选择聚合预订不足，然后单击**扩展预订**。</span><span class="sxs-lookup"><span data-stu-id="37f09-229">When you have task assignments for a resource without bookings (a booking shortage), you can select the aggregate booking shortage and click **Extend booking**.</span></span> <span data-ttu-id="37f09-230">可在此处查看解决资源不足和资源可用性所需预订。</span><span class="sxs-lookup"><span data-stu-id="37f09-230">From here, you can view the booking that is needed to address the resource’s shortage and their availability.</span></span> 
 
## <a name="time-and-expense"></a><span data-ttu-id="37f09-231">时间和支出</span><span class="sxs-lookup"><span data-stu-id="37f09-231">Time and expense</span></span>
<span data-ttu-id="37f09-232">此部分介绍 Project Service Automation 版本 3 中时间、支出和审批方面的改变。</span><span class="sxs-lookup"><span data-stu-id="37f09-232">This section provides information about the changes in time, expense, and approval in version 3 of Project Service Automation.</span></span> <span data-ttu-id="37f09-233">在 Dynamics 365 Project Service Automation 解决方案中，**时间条目**功能已更新，现在利用统一接口框架。</span><span class="sxs-lookup"><span data-stu-id="37f09-233">As part of the Dynamics 365 Project Service Automation solution, the **Time entry** feature has been refreshed to leverage the Unified Interface framework.</span></span> <span data-ttu-id="37f09-234">因此提供了一致、统一的用户界面，该界面采用了响应式设计，非常适合在任何屏幕尺寸或设备上查看。</span><span class="sxs-lookup"><span data-stu-id="37f09-234">This enables delivery of a consistent, uniform user interface that follows responsive design for optimal viewing on any screen size or device.</span></span> 

### <a name="landing-page"></a><span data-ttu-id="37f09-235">登陆页</span><span class="sxs-lookup"><span data-stu-id="37f09-235">Landing page</span></span>
<span data-ttu-id="37f09-236">版本 3 中已弃用了不可扩展的自定义时间条目体验。</span><span class="sxs-lookup"><span data-stu-id="37f09-236">The non-extensible custom time entry experience has been deprecated in version 3.</span></span> <span data-ttu-id="37f09-237">而是现在提供可扩展、可访问的本机网格体验。</span><span class="sxs-lookup"><span data-stu-id="37f09-237">Instead, there is now an extensible and accessible native grid experience.</span></span> <span data-ttu-id="37f09-238">可使用左侧的站点地图访问时间条目功能。</span><span class="sxs-lookup"><span data-stu-id="37f09-238">You can access time entry functionality by using the sitemap on the left.</span></span> <span data-ttu-id="37f09-239">由于此项更改，您不再可以一次性输入一周的时间。</span><span class="sxs-lookup"><span data-stu-id="37f09-239">With this change, you will no longer be able to enter time for one week at a time.</span></span> <span data-ttu-id="37f09-240">相反，您需要在网格中为每天创建一个时间条目。</span><span class="sxs-lookup"><span data-stu-id="37f09-240">Instead, you will need to create a time entry for each day in the grid.</span></span> <span data-ttu-id="37f09-241">创建一些时间条目之后，用户可以使用本主题后文介绍的**复制功能**批量创建时间条目。</span><span class="sxs-lookup"><span data-stu-id="37f09-241">After a few time entries have been created, users can bulk create time entries with **Copy** function explained later in this topic.</span></span> 

![时间条目登陆页](media/time-entry-landing-page-07.png)
 
### <a name="create-new-time-entries"></a><span data-ttu-id="37f09-243">创建新的时间条目</span><span class="sxs-lookup"><span data-stu-id="37f09-243">Create new time entries</span></span> 
<span data-ttu-id="37f09-244">单击功能区中的**新建**打开时间条目的快速创建页面，可在其中输入以分钟、小时或天为单位的持续时间。</span><span class="sxs-lookup"><span data-stu-id="37f09-244">Click **New** in the ribbon to open a quick-create page for time entry where you enter duration in minutes, hours, or days.</span></span> <span data-ttu-id="37f09-245">要输入，只需开始键入 h、m 或 d 和数量。</span><span class="sxs-lookup"><span data-stu-id="37f09-245">To do this, just start typing h, m, or d along with the quantity.</span></span>  

![时间条目快速创建](media/quick-create-time-entry-08.png)

<span data-ttu-id="37f09-247">查找字段受系统视图支持。</span><span class="sxs-lookup"><span data-stu-id="37f09-247">Look-up fields are backed by system views.</span></span> <span data-ttu-id="37f09-248">例如，输入项目信息之后，**项目任务**字段默认设置为**我已开启的项目任务**视图。</span><span class="sxs-lookup"><span data-stu-id="37f09-248">For example, after you enter project information, the **Project task** field is set by default to **My open project tasks** view.</span></span> <span data-ttu-id="37f09-249">若要为尚未分派给用户的任务创建时间条目，请在查找中单击**更改视图**，然后选择**所有可用的项目任务**。</span><span class="sxs-lookup"><span data-stu-id="37f09-249">To create time entries for tasks that are not assigned to the user, click **Change view** on the lookup and select **All Active project tasks**.</span></span> <span data-ttu-id="37f09-250">时间条目以创建并在网格中显示后，可以直接在网格中编辑任何明细值。</span><span class="sxs-lookup"><span data-stu-id="37f09-250">After the time entry has been created and shows in the grid, you can edit any line values directly in the grid.</span></span>  

### <a name="bulk-createcopy"></a><span data-ttu-id="37f09-251">批量创建/复制</span><span class="sxs-lookup"><span data-stu-id="37f09-251">Bulk create/copy</span></span> 
<span data-ttu-id="37f09-252">创建一些时间条目之后，可以使用复制功能批量创建更多时间条目。</span><span class="sxs-lookup"><span data-stu-id="37f09-252">After a few time entries have been created, you can use the copy functionality to bulk create additional time entries.</span></span> <span data-ttu-id="37f09-253">单击**复制**打开**复制**对话框。</span><span class="sxs-lookup"><span data-stu-id="37f09-253">Click **Copy** to open the **Copy** dialog.</span></span> <span data-ttu-id="37f09-254">在**开始期间:开始日期**中，设置必须从中复制时间段的日期范围。</span><span class="sxs-lookup"><span data-stu-id="37f09-254">In **From period: Start Date**, set the date range from which time periods must be copied from.</span></span> <span data-ttu-id="37f09-255">在**结束期间: 开始日期**中，指定必须为其创建时间条目的日期。</span><span class="sxs-lookup"><span data-stu-id="37f09-255">In **To Period: Start Date**, specify the date for which time entries must be created.</span></span> <span data-ttu-id="37f09-256">单击**复制**将时间条目复制到**结束期间**中指定的相应星期几。</span><span class="sxs-lookup"><span data-stu-id="37f09-256">Click **Copy** to copy the time entries to the corresponding day of the week indicated in the **To Period**.</span></span> <span data-ttu-id="37f09-257">例如，将把上周星期一的时间条目复制到**结束期间**中指定的周的星期一。</span><span class="sxs-lookup"><span data-stu-id="37f09-257">For example, Monday's time entry from last week will be copied into Monday for the week indicated in the **To Period**.</span></span> 

![批量复制时间条目](media/bulk-copy-time-entry-09.png)
 
### <a name="import-data"></a><span data-ttu-id="37f09-259">导入数据</span><span class="sxs-lookup"><span data-stu-id="37f09-259">Import data</span></span> 
<span data-ttu-id="37f09-260">分派和交换采用同一种 UI 模式，所以用户可以从需要导入预订的时间开始指定日期范围。</span><span class="sxs-lookup"><span data-stu-id="37f09-260">Assignments and exchange follow the same UI pattern, which allow the user to specify the date range from when bookings need to be imported.</span></span> <span data-ttu-id="37f09-261">然后必须明确选择应该复制到**草稿**时间条目中的预订。</span><span class="sxs-lookup"><span data-stu-id="37f09-261">You must then explicitly choose the bookings that should be copied into **Draft** time entries.</span></span> <span data-ttu-id="37f09-262">在版本 3 中，不再可以在网格和日历中查看**建议**时间条目的模式。</span><span class="sxs-lookup"><span data-stu-id="37f09-262">In version 3, you can no longer see the pattern of **Suggested** time entries on the grid and calendar.</span></span>  

### <a name="change-in-calendar-control"></a><span data-ttu-id="37f09-263">日历控件中的更改</span><span class="sxs-lookup"><span data-stu-id="37f09-263">Change in calendar control</span></span>
<span data-ttu-id="37f09-264">在版本 3 中，我们已放弃了自定义日历控件，现在使用 UC 日历显示周的时间条目。</span><span class="sxs-lookup"><span data-stu-id="37f09-264">In version 3, we have moved away from the custom calendar control and are now using the UC Calendar to display time entries for the week.</span></span> <span data-ttu-id="37f09-265">可以使用此日历查看天、周和月。</span><span class="sxs-lookup"><span data-stu-id="37f09-265">With this calendar, you can view day, week, and month.</span></span> 

> [!NOTE]
> <span data-ttu-id="37f09-266">“日历”的限制是，该控件不支持对单个日历项执行操作。</span><span class="sxs-lookup"><span data-stu-id="37f09-266">A limitation on the Calendar is that this control does not support actions on individual calendar items.</span></span> <span data-ttu-id="37f09-267">例如，不能选择一个或多个日历项并提交或删除这些项。</span><span class="sxs-lookup"><span data-stu-id="37f09-267">For example, you will not be able to select one or more calendar items and submit or delete those items.</span></span> <span data-ttu-id="37f09-268">单击日历项将打开**时间条目实体**页以提供更多操作。</span><span class="sxs-lookup"><span data-stu-id="37f09-268">Clicking on a calendar item will open the **Time entry entity** page for additional actions.</span></span> 

### <a name="extensibility"></a><span data-ttu-id="37f09-269">扩展性</span><span class="sxs-lookup"><span data-stu-id="37f09-269">Extensibility</span></span>
<span data-ttu-id="37f09-270">**仅捕获数据和支出条目实体中自定义字段内的数据** - 时间条目使用平台的可编辑网格、只读网格和日历控件。</span><span class="sxs-lookup"><span data-stu-id="37f09-270">**Capture data on custom fields in time and expense entry entities only** - Time entry uses an editable grid, a read-only grid, and calendar controls from the platform.</span></span> <span data-ttu-id="37f09-271">所有这些控件都在本机中，因此支持自定义设置。</span><span class="sxs-lookup"><span data-stu-id="37f09-271">All of these controls are native and therefore will support customizations.</span></span> <span data-ttu-id="37f09-272">在 Project Service Automation 版本 3 中，可以添加更多自定义字段，设置查找字段和为其提供自定义视图支持。</span><span class="sxs-lookup"><span data-stu-id="37f09-272">In Project Service Automation version 3, you can add additional custom fields, set up lookup fields, and back them up with custom views.</span></span> <span data-ttu-id="37f09-273">也可以基于在自定义字段值中选择的值设置自定义业务逻辑。</span><span class="sxs-lookup"><span data-stu-id="37f09-273">You can also set custom business logic based on selected values in custom fields.</span></span>  

<span data-ttu-id="37f09-274">**捕获时间和支出条目中自定义字段内的数据并通过支持提交和审批流的实体传播** - 下图中显示对时间条目的典型处理。</span><span class="sxs-lookup"><span data-stu-id="37f09-274">**Capture data on custom fields in time and expense entry and propagate it through entities supporting the submission and approval flow** - The typical processing of time entries is shown in the following diagram.</span></span>

![时间条目处理流](media/process-time-entries-10.png)

<span data-ttu-id="37f09-276">如果业务要求固定时间和支出实体必须捕获自定义定价维度，并通过上个图中的所有实体传播自定义定价维度中的时间和条目资源设置的值，请参阅[将自定义字段设置为定价维度](set-up-pricing-dimensions.md)</span><span class="sxs-lookup"><span data-stu-id="37f09-276">If business requirements stipulate that time and expense entities must capture custom pricing dimensions and propagate the values that are set by a time and entry resource in the custom pricing dimension through all of the entities in the previous graphic, see [Set up custom fields as pricing dimensions](set-up-pricing-dimensions.md)</span></span>

<span data-ttu-id="37f09-277">若要支持其中的时间和支出实体必须捕获自定义非定价维度并传播值的业务要求，可使用定价维度设置，并将自定义维度表示为不包含成本或帐单费率的定价维度。</span><span class="sxs-lookup"><span data-stu-id="37f09-277">To support business requirements where time and expense entities must capture custom non-pricing dimensions and propagate the values, you can use the pricing dimensions setup and express the custom dimensions as pricing dimensions with no cost or bill rate.</span></span> <span data-ttu-id="37f09-278">另一个方案是，使用在所有实体内均相同的字段名向每个实体添加一个自定义字段。</span><span class="sxs-lookup"><span data-stu-id="37f09-278">Another scenario would be to add a custom field to each of the entities, using the same field name across all entities.</span></span> <span data-ttu-id="37f09-279">可以创建自定义插件，以便关联参与使用交易源和交易连接实体的提交/审批流的实体中的记录。</span><span class="sxs-lookup"><span data-stu-id="37f09-279">Custom plug-ins can be created to relate records in the entities that are participating in the submission/approval flow using the transaction origin and transaction connection entities.</span></span>  

### <a name="delegate-time-and-expense-entry"></a><span data-ttu-id="37f09-280">委派时间和支出条目</span><span class="sxs-lookup"><span data-stu-id="37f09-280">Delegate time and expense entry</span></span>
<span data-ttu-id="37f09-281">Common Data Service 平台不支持一位用户冒充另一位用户，这意味着在 Project Service Automation 版本 3 中，不支持委派时间和支出条目。</span><span class="sxs-lookup"><span data-stu-id="37f09-281">The Common Data Service platform doesn't support one user impersonating another, which means in version 3 of Project Service Automation there is no support for delegated time and expense entry.</span></span> <span data-ttu-id="37f09-282">但是，合作伙伴和客户已通过解决办法在版本 3 中实现了对委派时间条目体验的支持。</span><span class="sxs-lookup"><span data-stu-id="37f09-282">However, partners and customers have leveraged a workaround to enable support for delegated time entry experiences in version 3.</span></span> <span data-ttu-id="37f09-283">这只是解决办法，不是完整解决方案，所以请务必了解限制，并且仅在可接受这些限制时使用这种办法。</span><span class="sxs-lookup"><span data-stu-id="37f09-283">This is only a workaround and not a complete solution, so it is important to understand the limitations and only use this approach if the limitations are acceptable.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="37f09-284">仅应将此信息视为针对合作伙伴/客户的自定义实施的建议指南。</span><span class="sxs-lookup"><span data-stu-id="37f09-284">This information should only be considered suggested guidance for custom implementation by a partner/customer.</span></span> <span data-ttu-id="37f09-285">产品团队不会通过我们的任何支持渠道提供对此功能的正式支持。</span><span class="sxs-lookup"><span data-stu-id="37f09-285">The product team will not offer formal support for this functionality through any of our support channels.</span></span>

### <a name="customization-details"></a><span data-ttu-id="37f09-286">自定义详细信息</span><span class="sxs-lookup"><span data-stu-id="37f09-286">Customization details</span></span> 
<span data-ttu-id="37f09-287">可通过自定义向创建和编辑体验添加**可预订资源**，这样用户就可以充当代理，方法是把**预订资源**字段更改为需要记录其时间和支出条目的另一位用户。</span><span class="sxs-lookup"><span data-stu-id="37f09-287">Customization allows you to add **Bookable resource** to the create and edit experiences, which will allow a user to act as a delegate by changing the **Booking resource** field to another user for whom time and expense entries need to be recorded.</span></span> <span data-ttu-id="37f09-288">以下步骤涵盖时间条目委派。</span><span class="sxs-lookup"><span data-stu-id="37f09-288">The following steps cover time entry delegation.</span></span> <span data-ttu-id="37f09-289">同样的信息也适用于支出条目委派。</span><span class="sxs-lookup"><span data-stu-id="37f09-289">The same information applies to expense entry delegation.</span></span> 
 
1.  <span data-ttu-id="37f09-290">确保委派用户拥有项目和项目任务的全局安全访问权限。</span><span class="sxs-lookup"><span data-stu-id="37f09-290">Ensure that the delegated user has global security access on projects and project tasks.</span></span> 
1.  <span data-ttu-id="37f09-291">因为**快速创建**页面中不显示**可预订资源**（这是**时间条目**实体中的一个字段），所以您需要添加该字段。</span><span class="sxs-lookup"><span data-stu-id="37f09-291">Because **Bookable resource**, which is a field on the **Time entry** entity, is not exposed on the **Quick create** page, you need to add it.</span></span>

    <span data-ttu-id="37f09-292">- 或 -</span><span class="sxs-lookup"><span data-stu-id="37f09-292">-or-</span></span>

    <span data-ttu-id="37f09-293">创建自定义视图以仅查看为资源创建的时间条目。</span><span class="sxs-lookup"><span data-stu-id="37f09-293">Create a custom view to view only time entries that are created for the resource.</span></span> <span data-ttu-id="37f09-294">发布此视图的应用程序模块设计器中的自定义设置，使其在**时间条目**页的**视图选择器**下显示。</span><span class="sxs-lookup"><span data-stu-id="37f09-294">Publish the customizations on the app module designer for this view to show up under **View selector** on the **Time entries** page.</span></span> <span data-ttu-id="37f09-295">有两个插件可用于为非项目时间条目处理对经理的设置：</span><span class="sxs-lookup"><span data-stu-id="37f09-295">There are two plug-ins that handle setting the manager for non-project time entries:</span></span>

    - <span data-ttu-id="37f09-296">PreValidateTimeEntryCreate</span><span class="sxs-lookup"><span data-stu-id="37f09-296">PreValidateTimeEntryCreate</span></span>
    - <span data-ttu-id="37f09-297">PreValidateTimeEntryUpdate</span><span class="sxs-lookup"><span data-stu-id="37f09-297">PreValidateTimeEntryUpdate</span></span>
 
1. <span data-ttu-id="37f09-298">创建一个新插件以替换**可预订资源**字段中分派的用户的经理的**经理**字段。</span><span class="sxs-lookup"><span data-stu-id="37f09-298">Create a new plug-in to overwrite the **Manager** field to the manager of the user assigned in the **Bookable resource** field.</span></span> <span data-ttu-id="37f09-299">使用与带外 (OOB) 插件（预验证）相同的**执行阶段**，并使用比 OOB 插件更高（高于 1）的**执行顺序**。</span><span class="sxs-lookup"><span data-stu-id="37f09-299">Use the same **Execution stage** as the out-of-band (OOB) plug-in (pre-validation) and use an **Execution order** that is higher than OOB plug-ins (greater than 1).</span></span> <span data-ttu-id="37f09-300">这将确保自定义插件在 OOB 插件后执行。</span><span class="sxs-lookup"><span data-stu-id="37f09-300">This will ensure that the custom plug-in is executed after the OOB plug-ins.</span></span>  
 
### <a name="end-user-experience"></a><span data-ttu-id="37f09-301">最终用户体验</span><span class="sxs-lookup"><span data-stu-id="37f09-301">End user experience</span></span>
1.  <span data-ttu-id="37f09-302">在快速创建页面中创建时间条目时，请输入项目和项目任务详细信息，然后在**可预订资源**字段中选择需要记录其时间条目的用户。</span><span class="sxs-lookup"><span data-stu-id="37f09-302">When you create a time entry on the quick create page, enter the Project and Project task details and then choose the user on **Bookable resource** field for whom the time entries need to be recorded for.</span></span> 
2.  <span data-ttu-id="37f09-303">默认情况下，此字段默认采用已登录用户，但是假设该用户替换此字段，则现在为所选**可预订资源**创建时间条目。</span><span class="sxs-lookup"><span data-stu-id="37f09-303">By default, this field defaults to the logged in user, however given that the user overrode this field, time entry is now created for the chosen **Bookable resource**.</span></span>
3.  <span data-ttu-id="37f09-304">当您提交您为这些记录创建的时间条目时，这些条目将按照预期排队等待项目中的审批者。</span><span class="sxs-lookup"><span data-stu-id="37f09-304">When you submit the time entries that you created for these records, the entries will be queued up for the approver in the project as expected.</span></span> 
4.  <span data-ttu-id="37f09-305">如果您撤消为另一位用户创建的时间条目，这些时间条目的状态将恢复为**草稿**，而**可预订资源**字段则设置为另一位用户。</span><span class="sxs-lookup"><span data-stu-id="37f09-305">When you recall the time entries created for the other user, the time entries will be returned to a state of **Draft** with the **Bookable Resource** field set to the other user.</span></span> 
5.  <span data-ttu-id="37f09-306">（可选）您可以切换到自定义视图以筛选为另一位用户创建的时间条目。</span><span class="sxs-lookup"><span data-stu-id="37f09-306">Optionally, you can switch to the custom view to filter time entries created for the other user.</span></span> 
 
### <a name="limitations"></a><span data-ttu-id="37f09-307">限制</span><span class="sxs-lookup"><span data-stu-id="37f09-307">Limitations</span></span>
<span data-ttu-id="37f09-308">只有已登录用户的上下文中才支持**复制**和**导入**功能。</span><span class="sxs-lookup"><span data-stu-id="37f09-308">**Copy** and **Import** functionality works only in the context of the user who is logged in.</span></span> <span data-ttu-id="37f09-309">这意味着不能导入为以可预订资源身份登录的用户创建的时间条目。</span><span class="sxs-lookup"><span data-stu-id="37f09-309">This means that it is not possible to copy or import time entries that are created for the user who is logged in as the bookable resource.</span></span>

<span data-ttu-id="37f09-310">仅当完成了上面的**自定义详细信息**部分中的步骤 4，才会将不属于项目的时间条目传递给可预订资源的经理进行审批。</span><span class="sxs-lookup"><span data-stu-id="37f09-310">Time entries that are not for a project will be routed for approval to the manager of the bookable resource only if step 4 in the section **Customization Details** above is completed.</span></span> <span data-ttu-id="37f09-311">否则，将把另一位用户的非项目时间条目误传递给已登录用户的经理。</span><span class="sxs-lookup"><span data-stu-id="37f09-311">Otherwise, non-project time entries for the other user will be incorrectly routed to the manager of the logged in user.</span></span> 

### <a name="other-changes"></a><span data-ttu-id="37f09-312">其他更改</span><span class="sxs-lookup"><span data-stu-id="37f09-312">Other changes</span></span> 
<span data-ttu-id="37f09-313">尚未移除**预订和任务**功能。</span><span class="sxs-lookup"><span data-stu-id="37f09-313">The **Bookings and Tasks** functionality has been removed.</span></span> 

## <a name="multidimensional-pricing"></a><span data-ttu-id="37f09-314">多维定价</span><span class="sxs-lookup"><span data-stu-id="37f09-314">Multidimensional pricing</span></span>
<span data-ttu-id="37f09-315">为了将灵活性发挥到极致，并满足不同的业务要求，Project Service Automation 版本 3 支持将定价维度集离散应用于成本和记帐费率。</span><span class="sxs-lookup"><span data-stu-id="37f09-315">To maximize flexibility and meet different business requirements, version 3 of Project Service Automation supports discrete application of pricing dimension sets to cost and bill rates.</span></span> <span data-ttu-id="37f09-316">可以将维度值设置为默认值，然后在定成本和定价流程中从资源分析传播到时间条目，再传播到项目实际值。</span><span class="sxs-lookup"><span data-stu-id="37f09-316">Dimension values can be set as the default and then propagated across the costing and pricing process from resource profiling to time entry to project actuals.</span></span> <span data-ttu-id="37f09-317">客户特定的配置和修改或扩展利用标准自定义基础结构。</span><span class="sxs-lookup"><span data-stu-id="37f09-317">Customer-specific configuration and modification or extension leverages standard customizability infrastructure.</span></span>

<span data-ttu-id="37f09-318">Project Service Automation 随附了一组默认定价维度和角色与资源单位，并允许为每个角色和部门组合设置价格和成本。</span><span class="sxs-lookup"><span data-stu-id="37f09-318">Project Service Automation ships with a default set of pricing dimensions and roles and resource units, and allows for the setup of prices and costs for each Role and Organizational unit combination.</span></span>

<span data-ttu-id="37f09-319">对于希望在版本 3 中继续将这些现成字段用作定价维度的 Project Service Automation 客户，不会有任何明显变化。</span><span class="sxs-lookup"><span data-stu-id="37f09-319">For customers of Project Service Automation who want to continue to use these out-of-the-box fields as pricing dimensions in version 3, there will not be any observable change.</span></span> <span data-ttu-id="37f09-320">可以继续正常使用 Project Service Automation。</span><span class="sxs-lookup"><span data-stu-id="37f09-320">You can continue to use Project Service Automation as usual.</span></span> <span data-ttu-id="37f09-321">但是，如果需要使用其他更多属性为资源定价或设置成本，可以使用版本 3 向 Project Service Automation 添加您自己的自定义定价维度。</span><span class="sxs-lookup"><span data-stu-id="37f09-321">If, however, you need to price or cost for your resources using other additional attributes, version 3 allows for adding your own custom pricing dimensions to Project Service Automation.</span></span> <span data-ttu-id="37f09-322">自定义定价维度的扩展是非常复杂的配置体验。</span><span class="sxs-lookup"><span data-stu-id="37f09-322">The extension of custom pricing dimensions is a complicated configuration experience.</span></span> 

## <a name="quotes-and-contracts"></a><span data-ttu-id="37f09-323">报价单和合同</span><span class="sxs-lookup"><span data-stu-id="37f09-323">Quotes and contracts</span></span>
<span data-ttu-id="37f09-324">在 Project Service Automation 版本 3 中，已改变了报价单和合同的各项设置和管理事项。</span><span class="sxs-lookup"><span data-stu-id="37f09-324">In version 3 of Project Service Automation, aspects of setup and management for quotes and contracts have changed.</span></span> <span data-ttu-id="37f09-325">以下部分提供更详细的信息。</span><span class="sxs-lookup"><span data-stu-id="37f09-325">The following sections provide more detailed information.</span></span>

### <a name="set-up-chargeability-options"></a><span data-ttu-id="37f09-326">设置应计费选项</span><span class="sxs-lookup"><span data-stu-id="37f09-326">Set up chargeability options</span></span>
<span data-ttu-id="37f09-327">在版本 1 和 2 中，特定报价单和合同的角色与类别应计费设置是使用报价单明细或合同子项顶部导航中的**应计费**视图完成的。</span><span class="sxs-lookup"><span data-stu-id="37f09-327">In versions 1 and 2, chargeability setup for roles and categories for specific quotes and contracts was done using the **Chargeability** view that was in the top navigation of a quote line or a contract line.</span></span> <span data-ttu-id="37f09-328">这里也是您为这些角色和支出类别设置价格的地方。</span><span class="sxs-lookup"><span data-stu-id="37f09-328">This was also where you could set up prices for those roles and Expense categories.</span></span>

<span data-ttu-id="37f09-329">从版本 3 开始，角色和支出类别的应计费选项设置在报价单或合同子项级别进行。</span><span class="sxs-lookup"><span data-stu-id="37f09-329">As of version 3, setup of chargeability options by role and  Expense category will be done at the quote or contract line level.</span></span> <span data-ttu-id="37f09-330">定价设置与应计费设置分开。</span><span class="sxs-lookup"><span data-stu-id="37f09-330">Pricing setup is separate from Chargeability setup.</span></span> <span data-ttu-id="37f09-331">不必使用顶部导航，即可在**报价单明细**和**合同子项**页中找到**应计费角色**和**应计费类别**，形式为选项卡。</span><span class="sxs-lookup"><span data-stu-id="37f09-331">You will be able to find **Chargeable roles** and **Chargeable categories** as tabs on the **Quote line** and  **Contract line** pages without having to use the top navigation.</span></span>

![应计费角色](media/chargeable-12.png)
 
<span data-ttu-id="37f09-333">应计费角色和应计费类别的设置也利用自带可编辑网格控件。</span><span class="sxs-lookup"><span data-stu-id="37f09-333">The setup of Chargeable roles and Chargeable categories also leverages the out-of-the-box editable grid control.</span></span> <span data-ttu-id="37f09-334">对于每个角色和类别，报价和合同签订阶段支持的记帐类型选项与之前版本一样，仍然是**应计费**和**不应计费**。</span><span class="sxs-lookup"><span data-stu-id="37f09-334">For each role and category, the supported options for billing type during the Quoting and Contracting phase remain unchanged from prior versions as **Chargeable** and **Non-chargeable**.</span></span> <span data-ttu-id="37f09-335">报价和合同签订阶段不支持**免费**类型。</span><span class="sxs-lookup"><span data-stu-id="37f09-335">**Complimentary** is not a supported type during the Quoting or Contracting phase.</span></span> <span data-ttu-id="37f09-336">只有时间或支出审批期间才支持**免费**。</span><span class="sxs-lookup"><span data-stu-id="37f09-336">**Complimentary** is supported only during Time or Expense approval.</span></span>  
 
### <a name="create-and-edit-custom-pricing-for-a-project-service-automation-quote-and-project-contract"></a><span data-ttu-id="37f09-337">为 Project Service Automation 报价单和项目合同创建和编辑自定义定价</span><span class="sxs-lookup"><span data-stu-id="37f09-337">Create and edit custom pricing for a Project Service Automation quote and project contract</span></span>
<span data-ttu-id="37f09-338">在版本 1 和 2 中，对特定报价单和合同使用自定义价目表是使用**应计费**视图中的**编辑价格**进行的。</span><span class="sxs-lookup"><span data-stu-id="37f09-338">In versions 1 and 2, using custom price list for specific quotes and contracts was done using **Edit prices** on the **Chargeability** view.</span></span> <span data-ttu-id="37f09-339">**应计费**视图位于报价单明细或合同子项顶部导航中。</span><span class="sxs-lookup"><span data-stu-id="37f09-339">The **Chargeability** view was located in the top navigation of a quote line or a contract line.</span></span> <span data-ttu-id="37f09-340">这里也是您为角色和支出类别设置应计费选项的地方。</span><span class="sxs-lookup"><span data-stu-id="37f09-340">This was also where you could set up chargeability options for roles and or expense categories.</span></span>

<span data-ttu-id="37f09-341">从版本 3 开始，为 Project Service Automation 报价单和 Project Service Automation 项目合同创建和使用自定义项目价目表已经与应计费设置分开。</span><span class="sxs-lookup"><span data-stu-id="37f09-341">As of version 3, creating and using a custom project price list on a Project Service Automation quote and Project Service Automation project contract has been separated from chargeability setup.</span></span> <span data-ttu-id="37f09-342">Project Service Automation 报价单和 Project Service Automation 项目合同具有一个称为**项目价目表**的新选项卡。</span><span class="sxs-lookup"><span data-stu-id="37f09-342">Project Service Automation quote and Project Service Automation project contracts have a new tab called **Project price lists**.</span></span> <span data-ttu-id="37f09-343">此选项卡显示附加到 Project Service Automation 报价单或项目合同的所有项目价目表的关联视图。</span><span class="sxs-lookup"><span data-stu-id="37f09-343">This tab shows an associated view of all Project price lists that are attached to the Project Service Automation quote or project contract.</span></span> <span data-ttu-id="37f09-344">若要基于已经与项目报价单或合同关联的现有价目表创建自定义价目表，请单击**创建自定义定价**。</span><span class="sxs-lookup"><span data-stu-id="37f09-344">To create a custom price list from an existing price list that is already associated to the project quote or contract, click **Create custom pricing**.</span></span> <span data-ttu-id="37f09-345">这将为所有关联价目表创建一个副本，并将其附加到报价单或合同。</span><span class="sxs-lookup"><span data-stu-id="37f09-345">This will make a copy of all the associated price lists and attach them to the Quote or contract.</span></span> <span data-ttu-id="37f09-346">现在可打开价目表和编辑角色或支出类别价格，以便这些定价更改仅应用于此报价单或合同。</span><span class="sxs-lookup"><span data-stu-id="37f09-346">You can now open the price list and edit role or expense category price so that those pricing changes will only apply to this quote or contract.</span></span> 
  
<span data-ttu-id="37f09-347">下图显示创建自定义价目表之前的情况。</span><span class="sxs-lookup"><span data-stu-id="37f09-347">The following graphic is before custom price lists have been created.</span></span>

![时间条目处理流](media/before-custom-price-lists-13.png)

<span data-ttu-id="37f09-349">下图显示创建自定义价目表之后的情况。</span><span class="sxs-lookup"><span data-stu-id="37f09-349">The following graphic shows after custom price lists have been created.</span></span>

![时间条目处理流](media/after-custom-price-lists-14.png)

> [!NOTE]
> <span data-ttu-id="37f09-351">单击**创建自定义定价**到创建自定义价目表之间可能会短暂延迟。</span><span class="sxs-lookup"><span data-stu-id="37f09-351">A short lag might occur between when you click **Create Custom Pricing** to when the custom price list is created.</span></span> <span data-ttu-id="37f09-352">建议刷新网格，而不是多次单击。</span><span class="sxs-lookup"><span data-stu-id="37f09-352">We recommend refreshing the grid instead of clicking multiple times.</span></span> <span data-ttu-id="37f09-353">如果为关联的价目表名称附加了报价单名称或项目合同名称，说明已创建了自定义价目表。</span><span class="sxs-lookup"><span data-stu-id="37f09-353">A custom price list has been created if the associated price list name has the quote name or the project contract name appended to it.</span></span>
