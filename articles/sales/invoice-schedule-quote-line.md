---
title: 基于项目的报价单明细上的发票计划
description: 此主题提供有关为报价单明细创建发票计划和里程碑的信息。
author: rumant
manager: Annbe
ms.date: 10/01/2020
ms.topic: article
ms.service: project-operations
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: 506de5217de48814d6b8f03a10c7c8648c575198
ms.sourcegitcommit: fa32b1893286f20271fa4ec4be8fc68bd135f53c
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/15/2021
ms.locfileid: "5278272"
---
# <a name="invoice-schedules-on-project-based-quote-lines"></a><span data-ttu-id="306a8-103">基于项目的报价单明细上的发票计划</span><span class="sxs-lookup"><span data-stu-id="306a8-103">Invoice schedules on project-based quote lines</span></span>

<span data-ttu-id="306a8-104">_**适用于：** 基于资源/非库存场景的 Project Operations，精简部署 - 估价开票交易_</span><span class="sxs-lookup"><span data-stu-id="306a8-104">_**Applies To:** Project Operations for resource/non-stocked based scenarios, Lite deployment - deal to proforma invoicing_</span></span>

<span data-ttu-id="306a8-105">基于项目的报价单明细提供表示发票计划的功能。</span><span class="sxs-lookup"><span data-stu-id="306a8-105">A project-based quote line gives the ability to express an invoice schedule.</span></span> <span data-ttu-id="306a8-106">这在报价单阶段是可选的，因为当应用程序绑定到报价单明细后，不支持为项目开票。</span><span class="sxs-lookup"><span data-stu-id="306a8-106">This is optional during the quote phase because the application does not support invoicing a project when it is tied to a Quote line.</span></span> <span data-ttu-id="306a8-107">仅在报价单赢单后允许开票。</span><span class="sxs-lookup"><span data-stu-id="306a8-107">Invoicing is only allowed after the quote is won.</span></span> <span data-ttu-id="306a8-108">在报价单阶段创建发票计划的唯一下游影响是会将此发票计划复制到基于项目的合同子项中。</span><span class="sxs-lookup"><span data-stu-id="306a8-108">The only downstream impact of creating an invoice schedule during the quote phase, is that this invoice schedule is copied over to the project-based contract line.</span></span> <span data-ttu-id="306a8-109">如果您在报价单阶段未创建发票计划，则可以在基于项目的报价单明细中创建。</span><span class="sxs-lookup"><span data-stu-id="306a8-109">If you do not create an invoice schedule during the quote phase, you will be able to do so on the project-based contract line.</span></span>

<span data-ttu-id="306a8-110">总体而言，发票计划的目的是允许为基于项目的合同子项自动创建发票草稿。</span><span class="sxs-lookup"><span data-stu-id="306a8-110">Overall, the purpose of invoice schedules is to allow for the automatic creation of draft invoices for a project-based contract line.</span></span> 

## <a name="create-a-time-and-material-invoice-schedule-for-a-project-based-quote-line"></a><span data-ttu-id="306a8-111">为基于项目的报价单明细创建时间和材料发票计划</span><span class="sxs-lookup"><span data-stu-id="306a8-111">Create a Time and material invoice schedule for a project-based quote line</span></span>

<span data-ttu-id="306a8-112">当基于项目的报价单明细的计费方法为“时间和材料”时，系统将生成基于日期的发票计划。</span><span class="sxs-lookup"><span data-stu-id="306a8-112">When the billing method for a project-based quote line is Time and material, the system generates a date-based invoice schedule.</span></span> <span data-ttu-id="306a8-113">若要自动生成基于日期的发票计划，请完成以下步骤。</span><span class="sxs-lookup"><span data-stu-id="306a8-113">To automatically generate a date-based invoice schedule, complete the following steps.</span></span>

1. <span data-ttu-id="306a8-114">转到 **设置** > **发票频率**，设置发票频率。</span><span class="sxs-lookup"><span data-stu-id="306a8-114">Go to **Settings** > **invoice frequencies** and set up an invoice frequency.</span></span>
2. <span data-ttu-id="306a8-115">在 **报价单** 页上，打开项目报价单，然后在 **摘要** 选项卡上设置要求交货日期。</span><span class="sxs-lookup"><span data-stu-id="306a8-115">On the **Quotes** page, open the Project quote and on the **Summary** tab, set a requested delivery date.</span></span>
3. <span data-ttu-id="306a8-116">打开您需要为其创建基于日期的发票计划的时间和材料报价单明细。</span><span class="sxs-lookup"><span data-stu-id="306a8-116">Open the time and material quote line that you need to create a date-based invoice schedule for.</span></span> 
4. <span data-ttu-id="306a8-117">在 **发票计划** 选项卡上，在 **记帐开始** 和 **发票频率** 字段中选择值。</span><span class="sxs-lookup"><span data-stu-id="306a8-117">On the **Invoice Schedule** tab, select values in the **Billing start** and **Invoice Frequency** fields.</span></span> 
5. <span data-ttu-id="306a8-118">在子网格上，选择 **生成发票计划**。</span><span class="sxs-lookup"><span data-stu-id="306a8-118">On the subgrid, select **Generate Invoice Schedule**.</span></span>
6. <span data-ttu-id="306a8-119">应用程序生成发票计划，并按照以下方式设置发票计划的 **发票运行日期**、**交易截止日期** 和 **运行状态** 字段：</span><span class="sxs-lookup"><span data-stu-id="306a8-119">The application generates the invoice schedule with the **Invoice Run Date**, **Transaction Cutoff Date**, and **Run Status** fields set in the following way:</span></span>

    - <span data-ttu-id="306a8-120">**发票运行日期** 设置为基于发票频率指示的日期。</span><span class="sxs-lookup"><span data-stu-id="306a8-120">**Invoice Run Date** is set to the date that is dictated based on the invoice frequency.</span></span>
    - <span data-ttu-id="306a8-121">**交易截止日期** 设置为 **发票运行日期** 之前的一天。</span><span class="sxs-lookup"><span data-stu-id="306a8-121">**Transaction cut-off date** is set to the day before the **Invoice Run Date**.</span></span>
    - <span data-ttu-id="306a8-122">**运行状态** 自动设置为 **未运行**。</span><span class="sxs-lookup"><span data-stu-id="306a8-122">**Run Status** is automatically set to **Not Run**.</span></span> <span data-ttu-id="306a8-123">当自动发票创建作业在某个发票运行日期运行时，它会将此字段更新为 **运行成功** 或 **运行失败**。</span><span class="sxs-lookup"><span data-stu-id="306a8-123">When the automatic invoice creation job runs for a certain invoice run date, it will update this field to either **Run Successful** or **Run Failed**.</span></span>

## <a name="create-a-fixed-price-invoice-schedule-for-a-project-based-quote-line"></a><span data-ttu-id="306a8-124">为基于项目的报价单明细创建固定价格发票计划</span><span class="sxs-lookup"><span data-stu-id="306a8-124">Create a Fixed price invoice schedule for a project-based quote line</span></span>

<span data-ttu-id="306a8-125">当基于项目的报价单明细具有 **固定** 计费方法时，系统将创建基于里程碑的发票计划。</span><span class="sxs-lookup"><span data-stu-id="306a8-125">When the project-based quote line has a **Fixed** billing method, the system creates a milestone-based invoice schedule.</span></span> <span data-ttu-id="306a8-126">完成以下步骤，自动为日历期间内平均分配的一组固定里程碑自动生成此计划。</span><span class="sxs-lookup"><span data-stu-id="306a8-126">Complete the following steps to automatically generate this schedule for a fixed set of milestones that are equally distributed for the calendar period.</span></span>

1. <span data-ttu-id="306a8-127">转到 **设置** > **发票频率**，设置发票频率。</span><span class="sxs-lookup"><span data-stu-id="306a8-127">Go to **Settings** > **invoice frequencies** and set up an invoice frequency.</span></span>
2. <span data-ttu-id="306a8-128">在 **报价单** 页上，打开项目报价单，然后在 **摘要** 选项卡上设置要求交货日期。</span><span class="sxs-lookup"><span data-stu-id="306a8-128">On the **Quotes** page, open the Project quote and on the **Summary** tab, set a requested delivery date.</span></span>
3. <span data-ttu-id="306a8-129">打开您需要为其创建里程碑计划的固定价格报价单明细。</span><span class="sxs-lookup"><span data-stu-id="306a8-129">Open the fixed price quote line that you need to create a milestone schedule for.</span></span> 
4. <span data-ttu-id="306a8-130">在 **发票计划** 选项卡上，在 **记帐开始** 和 **发票频率** 字段中选择值。</span><span class="sxs-lookup"><span data-stu-id="306a8-130">On the **Invoice Schedule** tab, select values in the **Billing start** and **Invoice Frequency** fields.</span></span> 
5. <span data-ttu-id="306a8-131">在子网格上，选择 **生成定期里程碑**。</span><span class="sxs-lookup"><span data-stu-id="306a8-131">On the subgrid, select **Generate Periodic Milestones**.</span></span>
6. <span data-ttu-id="306a8-132">应用程序将生成具有里程碑名称、日期和金额的发票计划。</span><span class="sxs-lookup"><span data-stu-id="306a8-132">The application generates the invoice schedule with a milestone name, date, and amount.</span></span>

    - <span data-ttu-id="306a8-133">里程碑名称将设置为基于发票频率指示的日期。</span><span class="sxs-lookup"><span data-stu-id="306a8-133">The milestone name is set to the date that is dictated based on the invoice frequency.</span></span>
    - <span data-ttu-id="306a8-134">里程碑日期将设置为基于发票频率指示的日期。</span><span class="sxs-lookup"><span data-stu-id="306a8-134">The milestone date is set to the date that is dictated based on the invoice frequency.</span></span>
    - <span data-ttu-id="306a8-135">里程碑金额是通过将基于项目的报价单明细上的报价单金额除以里程碑数量而得出的，由频率、记帐开始日期和要求交货日期指示。</span><span class="sxs-lookup"><span data-stu-id="306a8-135">The milestone amount is computed by dividing the quote amount on the project-based quote line by the number of milestones as dictated by the frequency and billing start and requested delivery dates.</span></span>
    - <span data-ttu-id="306a8-136">如果报价单明细还包含预估税额，在生成定期里程碑时，此值将在每个里程碑之间平均分配。</span><span class="sxs-lookup"><span data-stu-id="306a8-136">If the Quote line also has as estimated tax amount, this value is split between each milestone equally when generating periodic milestones.</span></span>

### <a name="manually-create-milestones"></a><span data-ttu-id="306a8-137">手动创建里程碑</span><span class="sxs-lookup"><span data-stu-id="306a8-137">Manually create milestones</span></span>

<span data-ttu-id="306a8-138">固定价格里程碑也可以在不定期拆分时手动生成。</span><span class="sxs-lookup"><span data-stu-id="306a8-138">Fixed price milestones can also be generated manually when they are not periodically split.</span></span> <span data-ttu-id="306a8-139">手动创建里程碑：</span><span class="sxs-lookup"><span data-stu-id="306a8-139">To create a milestone manually:</span></span>

<span data-ttu-id="306a8-140">打开您需要创建里程碑计划的固定价格报价单明细。</span><span class="sxs-lookup"><span data-stu-id="306a8-140">Open the Fixed price quote line where you need to create a milestone.</span></span> <span data-ttu-id="306a8-141">在 **发票计划** 选项卡上的子网格中，选择 **+ 创建新报价单明细里程碑**，然后根据下表输入所需信息。</span><span class="sxs-lookup"><span data-stu-id="306a8-141">On the **Invoice Schedule** tab, on the subgrid, select **+ Create new quote line milestone** and enter the required information based on the following table.</span></span>

| <span data-ttu-id="306a8-142">**字段**</span><span class="sxs-lookup"><span data-stu-id="306a8-142">**Field**</span></span> | <span data-ttu-id="306a8-143">**位置**</span><span class="sxs-lookup"><span data-stu-id="306a8-143">**Location**</span></span> | <span data-ttu-id="306a8-144">**说明**</span><span class="sxs-lookup"><span data-stu-id="306a8-144">**Description**</span></span> | <span data-ttu-id="306a8-145">**下游影响**</span><span class="sxs-lookup"><span data-stu-id="306a8-145">**Downstream impact**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="306a8-146">里程碑名称</span><span class="sxs-lookup"><span data-stu-id="306a8-146">Milestone name</span></span> | <span data-ttu-id="306a8-147">快速创建</span><span class="sxs-lookup"><span data-stu-id="306a8-147">Quick create</span></span> | <span data-ttu-id="306a8-148">里程碑的名称。</span><span class="sxs-lookup"><span data-stu-id="306a8-148">The name of the milestone.</span></span> | <span data-ttu-id="306a8-149">此名称将传播到项目合同子项里程碑和发票</span><span class="sxs-lookup"><span data-stu-id="306a8-149">This is propagated to the project contract line milestone and to the invoice</span></span> |
| <span data-ttu-id="306a8-150">项目任务</span><span class="sxs-lookup"><span data-stu-id="306a8-150">Project Task</span></span> | <span data-ttu-id="306a8-151">快速创建</span><span class="sxs-lookup"><span data-stu-id="306a8-151">Quick create</span></span> | <span data-ttu-id="306a8-152">如果里程碑与项目任务相关联，您可以使用此引用来添加自定义逻辑，以根据任务状态设置里程碑状态。</span><span class="sxs-lookup"><span data-stu-id="306a8-152">If the milestone is tied to project task, you can use this reference to add custom logic set the milestone status based on the task status.</span></span> | <span data-ttu-id="306a8-153">应用程序不会对此任务引用产生任何下游影响。</span><span class="sxs-lookup"><span data-stu-id="306a8-153">The application, does not have any downstream impact of this reference to a task.</span></span> |
| <span data-ttu-id="306a8-154">里程碑日期</span><span class="sxs-lookup"><span data-stu-id="306a8-154">Milestone date</span></span> | <span data-ttu-id="306a8-155">快速创建</span><span class="sxs-lookup"><span data-stu-id="306a8-155">Quick create</span></span> | <span data-ttu-id="306a8-156">设置自动发票创建流程应查找此里程碑的状态以考虑将其用于开票的日期。</span><span class="sxs-lookup"><span data-stu-id="306a8-156">Set the date on which the automatic invoice creation process should look for the status of this milestone to consider it for invoicing.</span></span> | <span data-ttu-id="306a8-157">此日期将传播到项目合同子项里程碑和发票。</span><span class="sxs-lookup"><span data-stu-id="306a8-157">This is propagated to the project contract line milestone and to the invoice.</span></span> |
| <span data-ttu-id="306a8-158">发票状态</span><span class="sxs-lookup"><span data-stu-id="306a8-158">Invoice status</span></span> | <span data-ttu-id="306a8-159">快速创建</span><span class="sxs-lookup"><span data-stu-id="306a8-159">Quick create</span></span> | <span data-ttu-id="306a8-160">创建里程碑时，此状态始终设置为 **未准备好开发票**。</span><span class="sxs-lookup"><span data-stu-id="306a8-160">When a milestone is created, this status is always set to **Not ready for invoicing**.</span></span> | <span data-ttu-id="306a8-161">此日期将传播到项目合同子项里程碑和发票。</span><span class="sxs-lookup"><span data-stu-id="306a8-161">This is propagated to the project contract line milestone and to the invoice.</span></span> |
| <span data-ttu-id="306a8-162">明细金额</span><span class="sxs-lookup"><span data-stu-id="306a8-162">Line Amount</span></span> | <span data-ttu-id="306a8-163">快速创建</span><span class="sxs-lookup"><span data-stu-id="306a8-163">Quick create</span></span> | <span data-ttu-id="306a8-164">将为客户开票的里程碑的金额或值。</span><span class="sxs-lookup"><span data-stu-id="306a8-164">Amount or value of the milestone that will be invoiced to the customer.</span></span> | <span data-ttu-id="306a8-165">此日期将传播到项目合同子项里程碑和发票。</span><span class="sxs-lookup"><span data-stu-id="306a8-165">This is propagated to the project contract line milestone and to the invoice.</span></span> |
| <span data-ttu-id="306a8-166">税款</span><span class="sxs-lookup"><span data-stu-id="306a8-166">Tax</span></span> | <span data-ttu-id="306a8-167">快速创建</span><span class="sxs-lookup"><span data-stu-id="306a8-167">Quick create</span></span> | <span data-ttu-id="306a8-168">将对里程碑应用的税额。</span><span class="sxs-lookup"><span data-stu-id="306a8-168">Tax amount that will be applied to the milestone.</span></span> | <span data-ttu-id="306a8-169">此日期将传播到项目合同子项里程碑和发票。</span><span class="sxs-lookup"><span data-stu-id="306a8-169">This is propagated to the project contract line milestone and to the invoice.</span></span> |


[!INCLUDE[footer-include](../includes/footer-banner.md)]